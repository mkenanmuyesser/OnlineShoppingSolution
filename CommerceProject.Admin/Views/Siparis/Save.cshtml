@using CommerceProject.Business.Entities

@{
    ViewBag.Title = "Save";
    Layout = "~/Views/Shared/_MainRoot.cshtml";
}

@{ 
    var siparis = ViewBag.Siparis as Siparis;
}

@section css{
    <link href="~/Content/Theme/assets/global/plugins/cubeportfolio/css/cubeportfolio.css" rel="stylesheet" type="text/css" />

    <style type="text/css">
        .none {
            display: none;
        }

        .red-border {
            border: 1px solid red;
        }

        #tableSiparisGonderim tbody tr td {
            vertical-align: middle !important;
        }

        .bg-choosen-detay {
            background: #bce1fb !important;
        }
    </style>
}

<div class="modal fade" id="detayModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" style="width:900px;">
        <div class="modal-content" style="width:900px;">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title"></h4>
            </div>
            <div class="modal-body" style="border-bottom: 1px solid #EFEFEF !important;">
                <div id="divDetay"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn red-haze" data-dismiss="modal">Kapat</button>
            </div>
        </div>
    </div>
</div>

<div class="portlet light bordered blue-steel">
    <div class="portlet-title">
        <div class="caption">
            <i class="icon-puzzle font-white"></i>
            <span class="caption-subject bold font-white uppercase"> @ViewBag.PageProperties.PageHeader </span>
            <span class="caption-helper">@ViewBag.PageProperties.PageDescription</span>
        </div>
        <div class="btn-group pull-right">
            <button type="button" class="btn green btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                İşlemler
                <i class="fa fa-angle-down"></i>
            </button>
            <ul class="dropdown-menu pull-right" role="menu">
                <li>
                    <a href="/Siparis/Index">
                        <i class="fa fa-search"></i> Arama
                    </a>
                </li>
                <li class="divider"></li>
                <li>
                    <a href="" class="fullscreen" data-original-title="Tam Ekran" title="Tam Ekran">
                        <i class="fa fa-arrows-alt"></i> Tam Ekran
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="portlet-body">
        <div class="portlet light bordered">
            <div class="portlet-body form">
                <div class="tabbable-custom">
                    <ul class="nav nav-tabs">
                        <li class="active">
                            <a href="#tab_1" data-toggle="tab"> Sipariş Bilgileri </a>
                        </li>
                        <li>
                            <a href="#tab_2" data-toggle="tab"> Fatura/Gönderim Bilgileri </a>
                        </li>
                        <li>
                            <a href="#tab_3" data-toggle="tab"> 
                            Sipariş Detayı (Ürün Bilgileri)
                                <span class="badge badge-danger" style="margin-top: -20px;margin-right: -12px;">@siparis.SiparisDetay.Count</span>
                            </a>
                        </li>
                        <li>
                            <a href="#tab_4" data-toggle="tab"> 
                            Sipariş Gönderimleri 
                                <span class="badge badge-danger" style="margin-top: -20px;margin-right: -12px;">@siparis.SiparisDetay.Sum(x => x.SiparisGonderim.Count)</span>
                            </a>
                        </li>
                        <li>
                            <a href="#tab_5" data-toggle="tab"> 
                            Sipariş Hareketleri 
                                <span class="badge badge-danger" style="margin-top: -20px;margin-right: -12px;">@siparis.SiparisHareket.Count</span>
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div class="tab-pane active" id="tab_1">
                            <input id="hdnSiparisId" type="hidden" value="@siparis.SiparisId" />

                            <form id="comform_1">
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label">Sipariş No</label>
                                            <input class="form-control input-sm" value="#@siparis.SiparisId" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label">Müşteri</label>
                                            <div>
                                                <button type="button" class="btn blue input-sm" style="width:100%" onclick="detayGoster('Müşteri Detayı', '/Kullanici/KullaniciDetayPartial/@siparis.KullaniciId');">
                                                <i class="fa fa-user"></i> Müşteri Detayı</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="control-label">Sipariş Durumu</label>
                                        <select id="dropDownSiparisDurum" name="dropDownSiparisDurum" class="form-control select2" style="width:100%;" tabindex="1"></select>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="control-label">Sipariş Tarihi</label>
                                        <input type="text" class="form-control" value="@(siparis.SiparisTarihi.ToString("dd.MM.yyyy"))" readonly>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label">Toplam İskonto</label>
                                            <input class="form-control input-sm decimal" value="@siparis.ToplamIskonto.ToString("N4").Replace(".", "").Replace(",", ".")" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label">Toplam Komisyon</label>
                                            <input class="form-control input-sm decimal" value="@siparis.ToplamKomisyon.ToString("N4").Replace(".", "").Replace(",", ".")" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label">Toplam İade</label>
                                            <input class="form-control input-sm decimal" value="@siparis.IadeToplam.ToString("N4").Replace(".", "").Replace(",", ".")" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label">Toplam Ödenecek Tutar</label>
                                            <input class="form-control input-sm decimal" value="@siparis.OdenecekTutar.ToString("N4").Replace(".", "").Replace(",", ".")" readonly>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="control-label">Kullanılan Para Puan Miktarı</label>
                                            <input class="form-control input-sm decimal" value="@siparis.KullanilanParaPuanMiktar.ToString("N4").Replace(".", "").Replace(",", ".")" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="control-label">Kalan Para Puan Miktarı</label>
                                            <input class="form-control input-sm decimal" value="@siparis.KalanParaPuanMiktar.ToString("N4").Replace(".", "").Replace(",", ".")" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="control-label">Kupon Miktarı</label>
                                            <input class="form-control input-sm decimal" value="@siparis.KuponMiktar.ToString("N4").Replace(".", "").Replace(",", ".")" readonly>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="control-label">Ürün KDV Dahil Toplam Tutar</label>
                                            <input class="form-control input-sm decimal" value="@siparis.UrunKdvDahilToplamTutar.ToString("N4").Replace(".", "").Replace(",", ".")" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="control-label">Ürün KDV Hariç Toplam Tutar</label>
                                            <input class="form-control input-sm decimal" value="@siparis.UrunKdvHaricToplamTutar.ToString("N4").Replace(".", "").Replace(",", ".")" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label class="control-label">Ürün KDV Toplam Tutar</label>
                                            <input class="form-control input-sm decimal" value="@siparis.UrunKdvToplamTutar.ToString("N4").Replace(".", "").Replace(",", ".")" readonly>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label">Ödeme Durumu</label>
                                            <select id="dropDownOdemeDurum" name="dropDownOdemeDurum" class="form-control select2" style="width:100%;" tabindex="2"></select>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="control-label">Ödeme Tipi</label>
                                        <select id="dropDownOdemeTip" name="dropDownOdemeTip" class="form-control select2" style="width:100%;" tabindex="3"></select>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label">Ödeme Tipi Ücreti</label>
                                            <input class="form-control input-sm decimal" value="@siparis.OdemeTipUcreti.ToString("N4").Replace(".", "").Replace(",", ".")" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label">Gönderim Ücreti</label>
                                            <input class="form-control input-sm decimal" value="@siparis.GonderimUcreti.ToString("N4").Replace(".", "").Replace(",", ".")" readonly>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label">Son İşlem Tarihi</label>
                                            <input type="text" class="form-control" value="@(siparis.SonIslemTarihi.ToString("dd.MM.yyyy"))" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label">Ödeme Tarihi</label>
                                            <input type="text" class="form-control" value="@(siparis.OdemeTarihi.HasValue ? siparis.OdemeTarihi.Value.ToString("dd.MM.yyyy") : "")" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label">Ip Adresi</label>
                                            <input class="form-control input-sm" value="@siparis.KullaniciIp" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label class="control-label">Aktif mi?</label>
                                            <div class="icheck-inline">
                                                <input id="txtIskontoAktif" name="txtIskontoAktif" type="checkbox" class="make-switch" data-size="small" data-on-text="Aktif" data-off-text="Pasif"
                                                       @(siparis.AktifMi ? "checked" : "false") tabindex="4">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <div class="col-md-offset-5 col-md-7">
                                        <button type="button" class="btn yellow" onclick="siparisGuncelle();" tabindex="5">
                                            Güncelle
                                            <i class="fa fa-save"></i>
                                        </button>
                                        <a href="/Siparis/Index" class="btn red" tabindex="6">
                                            İptal
                                            <i class="fa fa-close"></i>
                                        </a>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="tab-pane" id="tab_2">
                            <form id="comform_2">
                                <div class="row">
                                    <div class="col-md-6">
                                        <input type="hidden" id="hdnFaturaAdresId" value="@siparis.FaturaAdresId" />

                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered">
                                                <thead>
                                                    <tr>
                                                        <th colspan="2" class="bg-blue-steel font-white">
                                                            <div class="text-center">FATURA BİLGİLERİ</div>
                                                        </th>
                                                    </tr>
                                                    <tr style="display:none;">
                                                        <th width="30%"></th>
                                                        <th width="70%"></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Adres Adı<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <input id="txtFaturaAdresAdresAdi" name="txtFaturaAdresAdresAdi" class="form-control input-sm maxlength-handler" maxlength="50" placeholder="Adres Adı Giriniz..." value="@siparis.Adres1.AdresAdi" tabindex="1">
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Fatura Tipi<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <select id="dropDownFaturaAdresFaturaTipi" name="dropDownFaturaAdresFaturaTipi" class="form-control select2" style="width:100%;" tabindex="2"></select>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">T.C. Kimlik No<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <input id="txtFaturaAdresTcNo" name="txtFaturaAdresTcNo" class="form-control input-sm tc-number maxlength-handler" maxlength="11" placeholder="T.C. Kimlik No Giriniz..." value="@siparis.Adres1.TcNo" tabindex="3">
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Adı<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <input id="txtFaturaAdresAd" name="txtFaturaAdresAd" class="form-control input-sm maxlength-handler" maxlength="200" placeholder="Ad Giriniz..." value="@siparis.Adres1.Ad" tabindex="4">
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Soyadı<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <input id="txtFaturaAdresSoyad" name="txtFaturaAdresSoyad" class="form-control input-sm maxlength-handler" maxlength="200" placeholder="Soyad Giriniz..." value="@siparis.Adres1.Soyad" tabindex="5">
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Vergi No</label>
                                                        </td>
                                                        <td>
                                                            <input id="txtFaturaAdresVergiNo" name="txtFaturaAdresVergiNo" class="form-control input-sm maxlength-handler" maxlength="10" placeholder="Vergi No Giriniz..." value="@siparis.Adres1.VergiNo" tabindex="6">
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Vergi Dairesi</label>
                                                        </td>
                                                        <td>
                                                            <input id="txtFaturaAdresVergiDairesi" name="txtFaturaAdresVergiDairesi" class="form-control input-sm maxlength-handler" maxlength="200" placeholder="Vergi Dairesi Giriniz..." value="@siparis.Adres1.VergiDairesi" tabindex="7">
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Firma Unvanı</label>
                                                        </td>
                                                        <td>
                                                            <input id="txtFaturaAdresSirket" name="txtFaturaAdresSirket" class="form-control input-sm maxlength-handler" maxlength="200" placeholder="Firma Unvanı Giriniz..." value="@siparis.Adres1.FirmaUnvan" tabindex="8">
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Açıklama</label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <input id="txtFaturaAdresAciklama" name="txtFaturaAdresAciklama" class="form-control input-sm maxlength-handler" maxlength="250" placeholder="Açıklama Giriniz..." value="@siparis.Adres1.Aciklama" tabindex="9">
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Adres<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <textarea id="txtFaturaAdresAdres" name="txtFaturaAdresAdres" style="resize:none;" rows="2" class="form-control input-sm maxlength-handler"
                                                                              maxlength="500" placeholder="Adres Giriniz..." tabindex="10">@siparis.Adres1.AdresBilgi</textarea>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">İl<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <select id="dropDownFaturaAdresIl" name="dropDownFaturaAdresIl" class="form-control select2" style="width:100%;" tabindex="11"></select>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">İlçe<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <select id="dropDownFaturaAdresIlce" name="dropDownFaturaAdresIlce" class="form-control select2" style="width:100%;" tabindex="12"></select>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Telefon 1<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <input id="txtFaturaAdresTelefon1" name="txtFaturaAdresTelefon1" class="form-control input-sm com-phone maxlength-handler" maxlength="50" placeholder="0 (5xx) xxx-xxxx"
                                                                           value="@siparis.Adres1.Telefon1" tabindex="13">
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Telefon 2</label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <input id="txtFaturaAdresTelefon2" name="txtFaturaAdresTelefon2" class="form-control input-sm com-phone maxlength-handler" maxlength="50" placeholder="0 (5xx) xxx-xxxx"
                                                                       value="@siparis.Adres1.Telefon2" tabindex="14">
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Posta Kodu<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <input id="txtFaturaAdresPostaKodu" name="txtFaturaAdresPostaKodu" class="form-control input-sm integer maxlength-handler focus-sense" maxlength="50" placeholder="Posta Kodu Giriniz..."
                                                                           value="@siparis.Adres1.PostaKodu" tabindex="15">
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Aktif mi?</label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="icheck-inline">
                                                                    <input id="txtFaturaAdresAktifMi" name="txtFaturaAdresAktifMi" type="checkbox" class="make-switch" data-size="small" data-on-text="Aktif" data-off-text="Pasif"
                                                                           @(siparis.Adres1.AktifMi ? "checked" : "") tabindex="16">
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <input type="hidden" id="hdnGonderimAdresId" value="@siparis.GonderimAdresId" />

                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered">
                                                <thead>
                                                    <tr>
                                                        <th colspan="2" class="bg-blue-steel font-white">
                                                            <div class="text-center">GÖNDERİM BİLGİLERİ</div>
                                                        </th>
                                                    </tr>
                                                    <tr style="display:none;">
                                                        <th width="30%"></th>
                                                        <th width="70%"></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Adres Adı<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <input id="txtGonderimAdresAdresAdi" name="txtGonderimAdresAdresAdi" class="form-control input-sm maxlength-handler" maxlength="50" placeholder="Adres Adı Giriniz..." value="@siparis.Adres.AdresAdi" tabindex="17">
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Fatura Tipi<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <select id="dropDownGonderimAdresFaturaTipi" name="dropDownGonderimAdresFaturaTipi" class="form-control select2" style="width:100%;" tabindex="18"></select>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">T.C. Kimlik No<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <input id="txtGonderimAdresTcNo" name="txtGonderimAdresTcNo" class="form-control input-sm tc-number maxlength-handler" maxlength="11" placeholder="T.C. Kimlik No Giriniz..." value="@siparis.Adres.TcNo" tabindex="19">
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Adı<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <input id="txtGonderimAdresAd" name="txtGonderimAdresAd" class="form-control input-sm maxlength-handler" maxlength="200" placeholder="Ad Giriniz..." value="@siparis.Adres.Ad" tabindex="20">
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Soyadı<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <input id="txtGonderimAdresSoyad" name="txtGonderimAdresSoyad" class="form-control input-sm maxlength-handler" maxlength="200" placeholder="Soyad Giriniz..." value="@siparis.Adres.Soyad" tabindex="21">
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Vergi No</label>
                                                        </td>
                                                        <td>
                                                            <input id="txtGonderimAdresVergiNo" name="txtGonderimAdresVergiNo" class="form-control input-sm maxlength-handler" maxlength="10" placeholder="Vergi No Giriniz..." value="@siparis.Adres.VergiNo" tabindex="22">
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Vergi Dairesi</label>
                                                        </td>
                                                        <td>
                                                            <input id="txtGonderimAdresVergiDairesi" name="txtGonderimAdresVergiDairesi" class="form-control input-sm maxlength-handler" maxlength="200" placeholder="Vergi Dairesi Giriniz..." value="@siparis.Adres.VergiDairesi" tabindex="23">
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Firma Unvanı</label>
                                                        </td>
                                                        <td>
                                                            <input id="txtGonderimAdresSirket" name="txtGonderimAdresSirket" class="form-control input-sm maxlength-handler" maxlength="200" placeholder="Firma Unvanı Giriniz..." value="@siparis.Adres.FirmaUnvan" tabindex="24">
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Açıklama</label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <input id="txtGonderimAdresAciklama" name="txtGonderimAdresAciklama" class="form-control input-sm maxlength-handler" maxlength="250" placeholder="Açıklama Giriniz..." value="@siparis.Adres.Aciklama" tabindex="25">
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Adres<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <textarea id="txtGonderimAdresAdres" name="txtGonderimAdresAdres" style="resize:none;" rows="2" class="form-control input-sm maxlength-handler"
                                                                              maxlength="500" placeholder="Adres Giriniz..." tabindex="26">@siparis.Adres.AdresBilgi</textarea>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">İl<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <select id="dropDownGonderimAdresIl" name="dropDownGonderimAdresIl" class="form-control select2" style="width:100%;" tabindex="27"></select>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">İlçe<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <select id="dropDownGonderimAdresIlce" name="dropDownGonderimAdresIlce" class="form-control select2" style="width:100%;" tabindex="28"></select>
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Telefon 1<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <input id="txtGonderimAdresTelefon1" name="txtGonderimAdresTelefon1" class="form-control input-sm com-phone maxlength-handler" maxlength="50" placeholder="0 (5xx) xxx-xxxx"
                                                                           value="@siparis.Adres.Telefon1" tabindex="29">
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Telefon 2</label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <input id="txtGonderimAdresTelefon2" name="txtGonderimAdresTelefon2" class="form-control input-sm com-phone maxlength-handler" maxlength="50" placeholder="0 (5xx) xxx-xxxx"
                                                                       value="@siparis.Adres.Telefon2" tabindex="30">
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Posta Kodu<span class="required"> * </span></label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="input-icon right">
                                                                    <i class="fa"></i>
                                                                    <input id="txtGonderimAdresPostaKodu" name="txtGonderimAdresPostaKodu" class="form-control input-sm integer maxlength-handler focus-sense" maxlength="50" placeholder="Posta Kodu Giriniz..."
                                                                           value="@siparis.Adres.PostaKodu" tabindex="31">
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label class="control-label">Aktif mi?</label>
                                                        </td>
                                                        <td>
                                                            <div class="form-group no-margin">
                                                                <div class="icheck-inline">
                                                                    <input id="txtGonderimAdresAktifMi" name="txtGonderimAdresAktifMi" type="checkbox" class="make-switch" data-size="small" data-on-text="Aktif" data-off-text="Pasif"
                                                                           @(siparis.Adres.AktifMi ? "checked" : "") tabindex="32">
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <div class="col-md-offset-5 col-md-7">
                                        <button type="submit" class="btn yellow" tabindex="33">
                                            Güncelle
                                            <i class="fa fa-save"></i>
                                        </button>
                                        <a href="/Siparis/Index" class="btn red" tabindex="34">
                                            İptal
                                            <i class="fa fa-close"></i>
                                        </a>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="tab-pane" id="tab_3">
                            <div class="row">
                                <div class="col-md-12 margin-bottom-10">
                                    <div class="alert alert-info no-margin margin-top-10"> 
                                    <i class="fa fa-info-circle"></i> 
                                    Siparişe ait detayları görüntülemektesiniz. 
                                    Sipariş detayını silmek için <b>Aktif mi?</b> butonuna tıklayabilirsiniz. </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <div class="table-responsive">
                                            <table id="tableSiparisDetay" class="table table-striped table-bordered table-hover">
                                                <thead>
                                                    <tr>
                                                        <th style="width:5%">Resim</th>
                                                        <th style="width:5%">Ürün Kodu</th>
                                                        <th style="width:5%">Barkod No</th>
                                                        <th style="width:10%">Ürün</th>
                                                        <th style="width:5%">Adet</th>
                                                        <th style="width:10%">KDV Dahil Birim Tutarı</th>
                                                        <th style="width:10%">KDV Hariç Birim Tutarı</th>
                                                        <th style="width:10%">KDV Birim Tutarı</th>
                                                        <th style="width:10%">Toplam KDV Dahil Tutar</th>
                                                        <th style="width:10%">Toplam KDV Hariç Tutar</th>
                                                        <th style="width:10%">Toplam KDV Tutar</th>
                                                        <th style="width:5%">Aktif mi?</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @{
                                                        foreach (var spDetay in siparis.SiparisDetay)
                                                        {
                                                            <tr>
                                                                <td>
                                                                    <button type="button" class="btn btn-xs green-meadow" style="width:100%;" data-toggle="tooltip" data-placement="top" title="Göster"
                                                                            onclick="detayGoster('Ürün Resimleri', '/Urun/UrunResimPartial/@spDetay.UrunId');">
                                                                        <i class="icon-picture"></i>
                                                                    </button>
                                                                </td>
                                                                <td>@spDetay.Urun.UrunKod</td>
                                                                <td>@spDetay.Urun.Barkod</td>
                                                                <td>@spDetay.Urun.Adi</td>
                                                                <td>@spDetay.Adet</td>
                                                                <td>@spDetay.HesaplananBirimKdvDahilTutar</td>
                                                                <td>@spDetay.HesaplananBirimKdvHaricTutar</td>
                                                                <td>@spDetay.HesaplananBirimKdvTutar</td>
                                                                <td>@spDetay.HesaplananKdvDahilTutar</td>
                                                                <td>@spDetay.HesaplananKdvHaricTutar</td>
                                                                <td>@spDetay.HesaplananKdvTutar</td>
                                                                <td>
                                                                    <div class="icheck-inline">
                                                                        <input id="txtSiparisDetayAktif@(spDetay.SiparisDetayId)" type="checkbox" class="make-switch" data-size="small" data-on-text="Aktif" data-off-text="Pasif"
                                                                               onchange="javascript: siparisDetayGuncelle('@spDetay.SiparisDetayId');" @(spDetay.AktifMi ? "checked" : "")>
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                        }
                                                    }
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="tab_4">
                            <div class="portlet light bordered bg-inverse">
                                <div class="portlet-body">
                                    <form id="comform_3">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="dropDownGonderimTipi" class="control-label">Gönderim Tipi<span class="required"> * </span></label>
                                                    <div class="input-icon right">
                                                        <i class="fa"></i>
                                                        <select id="dropDownGonderimTipi" name="dropDownGonderimTipi" class="form-control select2" style="width:100%;" tabindex="1"></select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="dropDownTeslimZamaniTipi" class="control-label">Teslim Zamanı Tipi<span class="required"> * </span></label>
                                                    <div class="input-icon right">
                                                        <i class="fa"></i>
                                                        <select id="dropDownTeslimZamaniTipi" name="dropDownTeslimZamaniTipi" class="form-control select2" style="width:100%;" tabindex="2"></select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="txtGonderimTakipNo" class="control-label">Gönderim Takip No</label>
                                                    <input id="txtGonderimTakipNo" name="txtGonderimTakipNo" type="text" class="form-control input-sm maxlength-handler" maxlength="50" placeholder="Gönderim Takip No Giriniz..." tabindex="3">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label for="txtGonderimAciklama" class="control-label">Açıklama</label>
                                                    <input id="txtGonderimAciklama" name="txtGonderimAciklama" type="text" class="form-control input-sm maxlength-handler" maxlength="500" placeholder="Açıklama Giriniz..." tabindex="4">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label class="control-label">Gönderim Tarihi<span class="required"> * </span></label>
                                                    <div class="input-icon right">
                                                        <i class="fa"></i>
                                                        <div id="dateTimeGonderimTarihi" name="dateTimeGonderimTarihi" class="input-group date" data-provide="datepicker">
                                                            <input type="text" name="dateTimeGonderimTarihi" class="form-control" placeholder="Gönderim Tarihi Giriniz..." tabindex="5">
                                                            <div class="input-group-addon">
                                                                <span class="glyphicon glyphicon-th"></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label class="control-label">Teslim Tarihi</label>
                                                    <div id="dateTimeTeslimTarihi" name="dateTimeTeslimTarihi" class="input-group date" data-provide="datepicker">
                                                        <input type="text" name="dateTimeTeslimTarihi" class="form-control" placeholder="Teslim Tarihi Giriniz..." tabindex="6">
                                                        <div class="input-group-addon">
                                                            <span class="glyphicon glyphicon-th"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label for="txtGonderimAdet" class="control-label">Gönderilecek Adet<span class="required"> * </span></label>
                                                    <div class="input-icon right">
                                                        <i class="fa"></i>
                                                        <input id="txtGonderimAdet" name="txtGonderimAdet" type="text" class="form-control input-sm integer focus-sense" placeholder="Adet Giriniz..." tabindex="7">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label for="txtGonderimAktif" class="control-label">Aktif mi?</label>
                                                    <div class="icheck-inline">
                                                        <input id="txtGonderimAktif" name="txtGonderimAktif" type="checkbox" class="make-switch" data-size="small" data-on-text="Aktif" data-off-text="Pasif" checked tabindex="8">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label class="control-label">Sipariş Detayları<span class="required"> * </span>
                                                    <span class="font-red-mint" style="font-size:12px;">Lütfen gönderim kaydı yapılacak sipariş detayını aşağıdaki listeden seçiniz.</span></label>
                                                    <div class="table-responsive">
                                                        <table id="tableSiparisDetayGonderim" class="table table-striped table-bordered">
                                                            <thead>
                                                                <tr class="bg-grey-silver">
                                                                    <th style="width:5%"></th>
                                                                    <th style="width:20%">Ürün Kodu</th>
                                                                    <th style="width:25%">Barkod No</th>
                                                                    <th style="width:35%">Ürün</th>
                                                                    <th style="width:10%">Gönderilecek Adet</th>
                                                                    <th style="width:5%">Aktif mi?</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                @{
                                                                    foreach (var spDetay in siparis.SiparisDetay)
                                                                    {
                                                                        <tr data-siparisdetayid="@spDetay.SiparisDetayId" class="bg-white">
                                                                            <td class="text-center">
                                                                                <label><input type="radio" name="radioDetay" class="icheck" data-radio="iradio_square-blue"></label>
                                                                            </td>
                                                                            <td>@spDetay.Urun.UrunKod</td>
                                                                            <td>@spDetay.Urun.Barkod</td>
                                                                            <td>@spDetay.Urun.Adi</td>
                                                                            <td>@spDetay.Adet</td>
                                                                            <td>
                                                                                <div class="icheck-inline">
                                                                                    <input type="checkbox" class="make-switch" data-size="mini" data-on-text="Aktif" data-off-text="Pasif"
                                                                                           @(spDetay.AktifMi ? "checked" : "") readonly>
                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                    }
                                                                }
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-actions">
                                            <div class="text-center">
                                                <button type="submit" class="btn btn-sm yellow-lemon" tabindex="9">
                                                    <i class="fa fa-plus"></i>
                                                    Ekle
                                                </button>
                                                <button type="button" class="btn btn-sm green-meadow" onclick="siparisGonderimTemizle();" tabindex="10">
                                                    <i class="fa fa-recycle"></i>
                                                    Temizle
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="portlet light bordered">
                                <div class="portlet-body">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="table-responsive">
                                                    <table id="tableSiparisGonderim" class="table table-striped table-bordered table-hover">
                                                        <thead>
                                                            <tr>
                                                                <th width="10%">Ürün</th>
                                                                <th width="5%">Gönderilen Adet</th>
                                                                <th width="8%">Takip No</th>
                                                                <th width="15%">Açıklama</th>
                                                                <th width="10%">Gönderim Tipi</th>
                                                                <th width="13%">Teslim Zamanı Tipi</th>
                                                                <th width="13%">Gönderim Tarihi</th>
                                                                <th width="10%">Teslim Tarihi</th>
                                                                <th width="8%">Aktif mi?</th>
                                                                <th width="8%">İşlemler</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @{
                                                                foreach (var spDetay in siparis.SiparisDetay)
                                                                {
                                                                    foreach (var gonderim in spDetay.SiparisGonderim)
                                                                    {
                                                                        <tr class="data-show" data-id="@gonderim.SiparisGonderimId">
                                                                            <td class="sg-urunadi">@spDetay.Urun.Adi</td>
                                                                            <td class="sg-adet">@gonderim.Adet</td>
                                                                            <td class="sg-takipno">@gonderim.TakipNo</td>
                                                                            <td class="sg-aciklama">@gonderim.Aciklama</td>
                                                                            <td class="sg-gonderimtipi" data-id="@gonderim.GonderimId">@gonderim.Gonderim.Adi</td>
                                                                            <td class="sg-teslimzamanitipi" data-id="@gonderim.TeslimZamaniId">@gonderim.TeslimZamani.Adi</td>
                                                                            <td class="sg-gonderimtarihi">@gonderim.GonderimTarihi.ToString("dd.MM.yyyy")</td>
                                                                            <td class="sg-teslimtarihi">@(gonderim.TeslimTarihi.HasValue ? gonderim.TeslimTarihi.Value.ToString("dd.MM.yyyy") : "")</td>
                                                                            <td class="sg-aktifmi">
                                                                                <div class="icheck-inline">
                                                                                    <input id="gonderimaktifmi-@(gonderim.SiparisGonderimId)" type="checkbox" class="make-switch" data-size="mini" data-on-text="Aktif" data-off-text="Pasif"
                                                                                           @(gonderim.AktifMi ? "checked" : "") readonly>
                                                                                </div>
                                                                            </td>
                                                                            <td>
                                                                                <div class="text-center">
                                                                                    <a href="javascript:;" class="btn btn-xs yellow-gold" data-toggle="tooltip" data-placement="top" title="Güncelle"
                                                                                       onclick="editModeGonderim('@gonderim.SiparisGonderimId', this);">
                                                                                        <i class="fa fa-edit"></i>
                                                                                    </a>
                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                        <tr class="data-edit none" data-id="@gonderim.SiparisGonderimId" data-siparisdetayid="@spDetay.SiparisDetayId">
                                                                            <td class="sg-urunadi">@spDetay.Urun.Adi</td>
                                                                            <td class="sg-adet">
                                                                                <input id="gonderimadet-@(gonderim.SiparisGonderimId)" type="text" class="form-control input-sm integer focus-sense" placeholder="Adet..." value="@gonderim.Adet" />
                                                                            </td>
                                                                            <td>
                                                                                <input id="gonderimtakipno-@(gonderim.SiparisGonderimId)" type="text" class="form-control input-sm maxlength-handler" maxlength="50"
                                                                                       placeholder="Takip No..." value="@gonderim.TakipNo" />
                                                                            </td>
                                                                            <td>
                                                                                <input id="gonderimaciklama-@(gonderim.SiparisGonderimId)" type="text" class="form-control input-sm maxlength-handler" maxlength="50"
                                                                                       placeholder="Açıklama..." value="@gonderim.Aciklama" />
                                                                            </td>
                                                                            <td>
                                                                                <input type="hidden" id="gonderimgonderimtipi-@(gonderim.SiparisGonderimId)" class="form-control select2 gonderim-tipi" style="width:100%;"
                                                                                       value="@gonderim.GonderimId" />
                                                                            </td>
                                                                            <td>
                                                                                <input type="hidden" id="gonderimteslimzamanitipi-@(gonderim.SiparisGonderimId)" class="form-control select2 teslim-tipi" style="width:100%;"
                                                                                       value="@gonderim.TeslimZamaniId" />
                                                                            </td>
                                                                            <td>
                                                                                <div id="gonderimgonderimtarihi-@(gonderim.SiparisGonderimId)" class="input-group date" data-provide="datepicker">
                                                                                    <input type="text" class="form-control input-sm" placeholder="Gönderim Tarihi..." value="@gonderim.GonderimTarihi.ToString("dd.MM.yyyy")">
                                                                                    <div class="input-group-addon">
                                                                                        <span class="glyphicon glyphicon-th"></span>
                                                                                    </div>
                                                                                </div>
                                                                            </td>
                                                                            <td>
                                                                                <div id="gonderimteslimtarihi-@(gonderim.SiparisGonderimId)" class="input-group date" data-provide="datepicker">
                                                                                    <input type="text" class="form-control input-sm" placeholder="Teslim Tarihi..."
                                                                                           value="@(gonderim.TeslimTarihi.HasValue ? gonderim.TeslimTarihi.Value.ToString("dd.MM.yyyy") : "")">
                                                                                    <div class="input-group-addon">
                                                                                        <span class="glyphicon glyphicon-th"></span>
                                                                                    </div>
                                                                                </div>
                                                                            </td>
                                                                            <td>
                                                                                <div class="icheck-inline">
                                                                                    <input id="gonderimaktif-@(gonderim.SiparisGonderimId)" type="checkbox" class="make-switch" data-size="mini" data-on-text="Aktif" data-off-text="Pasif"
                                                                                           @(gonderim.AktifMi ? "checked" : "")>
                                                                                </div>
                                                                            </td>
                                                                            <td>
                                                                                <div class="text-center">
                                                                                    <a href="javascript:;" class="btn btn-xs btn-default" data-toggle="tooltip" data-placement="top" title="Vazgeç"
                                                                                       onclick="cancelModeGonderim('@gonderim.SiparisGonderimId', this);">
                                                                                        <i class="fa fa-check-circle"></i>
                                                                                    </a>
                                                                                    <a href="javascript:;" class="btn btn-xs green-meadow" data-toggle="tooltip" data-placement="top" title="Kaydet"
                                                                                       onclick="saveModeGonderim('@gonderim.SiparisGonderimId', this);">
                                                                                        <i class="fa fa-check-circle"></i>
                                                                                    </a>
                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                    }
                                                                }
                                                            }
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="tab-pane" id="tab_5">
                            <div class="portlet light bordered bg-inverse">
                                <div class="portlet-body">
                                    <form id="comform_4">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label for="txtHareketAciklama" class="control-label">Açıklama<span class="required"> * </span></label>
                                                    <div class="input-icon right">
                                                        <i class="fa"></i>
                                                        <input id="txtHareketAciklama" name="txtHareketAciklama" type="text" class="form-control input-sm maxlength-handler" maxlength="500" placeholder="Açıklama Giriniz..." tabindex="1">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label">Tarih<span class="required"> * </span></label>
                                                    <div class="input-icon right">
                                                        <i class="fa"></i>
                                                        <div id="dateTimeHareketTarih" name="dateTimeHareketTarih" class="input-group date" data-provide="datepicker">
                                                            <input type="text" name="dateTimeHareketTarih" class="form-control" placeholder="Tarih Giriniz..." tabindex="2">
                                                            <div class="input-group-addon">
                                                                <span class="glyphicon glyphicon-th"></span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label for="txtHareketKullaniciGoster" class="control-label">Kullanıcıya Gösterilecek mi?</label>
                                                    <div class="icheck-inline">
                                                        <input id="txtHareketKullaniciGoster" name="txtHareketKullaniciGoster" type="checkbox" class="make-switch" data-size="small" data-on-text="Evet" data-off-text="Hayır" checked tabindex="3">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label for="txtHareketAktif" class="control-label">Aktif mi?</label>
                                                    <div class="icheck-inline">
                                                        <input id="txtHareketAktif" name="txtHareketAktif" type="checkbox" class="make-switch" data-size="small" data-on-text="Evet" data-off-text="Hayır" checked tabindex="4">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-actions">
                                            <div class="text-center">
                                                <button type="submit" class="btn btn-sm yellow-lemon" tabindex="5">
                                                    <i class="fa fa-plus"></i>
                                                    Ekle
                                                </button>
                                                <button type="button" class="btn btn-sm green-meadow" onclick="siparisHareketTemizle();" tabindex="6">
                                                    <i class="fa fa-recycle"></i>
                                                    Temizle
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="portlet light bordered">
                                <div class="portlet-body">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="table-responsive">
                                                    <table id="tableSiparisHareket" class="table table-striped table-bordered table-hover">
                                                        <thead>
                                                            <tr>
                                                                <th width="50%">Açıklama</th>
                                                                <th width="20%">Tarih</th>
                                                                <th width="10%">Kullanıcıya Gösterilecek mi?</th>
                                                                <th width="10%">Aktif mi?</th>
                                                                <th width="10%">İşlemler</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @{
                                                                foreach (var hareket in siparis.SiparisHareket)
                                                                {
                                                                    <tr class="data-show" data-id="@hareket.SiparisHareketId">
                                                                        <td class="sh-aciklama">@hareket.Aciklama</td>
                                                                        <td class="sh-tarih">@hareket.Tarih.ToString("dd.MM.yyyy")</td>
                                                                        <td class="sh-kullanicigoster">
                                                                            <div class="icheck-inline">
                                                                                <input id="hareketkullanicigostermi-@(hareket.SiparisHareketId)" type="checkbox" class="make-switch" data-size="mini" data-on-text="Aktif" data-off-text="Pasif"
                                                                                       @(hareket.KullaniciyaGosterilecekMi ? "checked" : "") readonly>
                                                                            </div>
                                                                        </td>
                                                                        <td class="sh-aktifmi">
                                                                            <div class="icheck-inline">
                                                                                <input id="hareketaktifmi-@(hareket.SiparisHareketId)" type="checkbox" class="make-switch" data-size="mini" data-on-text="Aktif" data-off-text="Pasif"
                                                                                       @(hareket.AktifMi ? "checked" : "") readonly>
                                                                            </div>
                                                                        </td>
                                                                        <td>
                                                                            <div class="text-center">
                                                                                <a href="javascript:;" class="btn btn-xs yellow-gold" data-toggle="tooltip" data-placement="top" title="Güncelle" onclick="editModeHareket('@hareket.SiparisHareketId', this);">
                                                                                    <i class="fa fa-edit"></i>
                                                                                </a>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="data-edit none" data-id="@hareket.SiparisHareketId">
                                                                        <td>
                                                                            <input id="hareketaciklama-@(hareket.SiparisHareketId)" type="text" class="form-control input-sm maxlength-handler" maxlength="500" placeholder="Açıklama..." value="@hareket.Aciklama" />
                                                                        </td>
                                                                        <td>
                                                                            <div id="harekettarih-@(hareket.SiparisHareketId)" class="input-group date" data-provide="datepicker">
                                                                                <input type="text" class="form-control input-sm" placeholder="Tarih..." value="@hareket.Tarih.ToString("dd.MM.yyyy")">
                                                                                <div class="input-group-addon">
                                                                                    <span class="glyphicon glyphicon-th"></span>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                        <td>
                                                                            <div class="icheck-inline">
                                                                                <input id="hareketkullanicigoster-@(hareket.SiparisHareketId)" type="checkbox" class="make-switch" data-size="mini" data-on-text="Aktif" data-off-text="Pasif"
                                                                                       @(hareket.KullaniciyaGosterilecekMi ? "checked" : "")>
                                                                            </div>
                                                                        </td>
                                                                        <td>
                                                                            <div class="icheck-inline">
                                                                                <input id="hareketaktif-@(hareket.SiparisHareketId)" type="checkbox" class="make-switch" data-size="mini" data-on-text="Aktif" data-off-text="Pasif"
                                                                                       @(hareket.AktifMi ? "checked" : "")>
                                                                            </div>
                                                                        </td>
                                                                        <td>
                                                                            <div class="text-center">
                                                                                <a href="javascript:;" class="btn btn-xs btn-default" data-toggle="tooltip" data-placement="top" title="Vazgeç" onclick="cancelModeHareket('@hareket.SiparisHareketId', this);">
                                                                                    <i class="fa fa-check-circle"></i>
                                                                                </a>
                                                                                <a href="javascript:;" class="btn btn-xs green-meadow" data-toggle="tooltip" data-placement="top" title="Kaydet" onclick="saveModeHareket('@hareket.SiparisHareketId', this);">
                                                                                    <i class="fa fa-check-circle"></i>
                                                                                </a>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                }
                                                            }
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section js{
    <script src="~/Content/Theme/assets/global/plugins/cubeportfolio/js/jquery.cubeportfolio.min.js" type="text/javascript"></script>

    <script type="text/javascript">
        var siparisDurumTipListesi = @Html.Raw(Json.Encode(ViewBag.SiparisDurumTipListesi))
        var odemeDurumTipListesi = @Html.Raw(Json.Encode(ViewBag.OdemeDurumTipListesi))
        var siparisOdemeTipListesi = @Html.Raw(Json.Encode(ViewBag.SiparisOdemeTipListesi))
        var ilListesi = @Html.Raw(Json.Encode(ViewBag.IlListesi))
        var ilceListesi = @Html.Raw(Json.Encode(ViewBag.IlceListesi))
        var gonderimTipiListesi = @Html.Raw(Json.Encode(ViewBag.GonderimTipiListesi))
        var teslimZamaniTipiListesi = @Html.Raw(Json.Encode(ViewBag.TeslimZamaniTipiListesi))
        var faturaTipListesi = @Html.Raw(Json.Encode(ViewBag.FaturaTipListesi))

        jQuery.validator.addMethod("buyukSifir", function (value, element) {
            return this.optional(element) || (parseFloat(value) > 0);
        }, "0' dan büyük bir değer giriniz.");

        $(document).ready(function () {
            $('[data-toggle="tooltip"]').tooltip();
            $('.tc-number').inputmask('99999999999', {
                numericInput: true,
                rightAlignNumerics: false,
                greedy: false
            });
            $(".decimal").inputmask('decimal', {
                rightAlign: false,
                integerDigits: 18,
                radixPoint: ".",
                digits: 4
            });
            $(".integer").inputmask('99', {
                numericInput: true,
                rightAlignNumerics: false,
                greedy: false,
                placeholder: '00'
            });
            $('.com-phone').inputmask('0 (999) 999-9999', {
                numeric: true,
                removeMaskOnSubmit: true,
                onincomplete: function (o, e) {
                    $(this).val('');
                    var formId = $(this).closest('form').attr('id');
                    $('#' + formId).validate().element($(this));
                }
            });
            $('.input-group.date').datepicker({
                autoclose: true,
                dateFormat: "dd.mm.yyyy",
                language: 'tr'
            });
            $('input[type="radio"][name="radioDetay"]').on('ifChecked', function (event) {
                $('input[type="radio"][name="radioDetay"]').closest('tr').removeClass('bg-choosen-detay').addClass('bg-white');
                $(this).closest('tr').removeClass('bg-white').addClass('bg-choosen-detay');
            });

            $('#dropDownSiparisDurum').select2({
                placeholder: "Sipariş Durumu Seçiniz...",
                language: {
                    noResults: function (params) {
                        return "Hiç kayıt bulunamadı.";
                    }
                },
                data: siparisDurumTipListesi,
                escapeMarkup: function (markup) {
                    return markup;
                },
                templateResult: templateData,
                templateSelection: templateDataSelection
            }).val('').trigger('change');
            @if(siparis.SiparisId > 0)
            {
                @: $('#dropDownSiparisDurum').val('@(siparis.SiparisDurumTipId)').trigger('change');
            }

            $('#dropDownOdemeDurum').select2({
                placeholder: "Ödeme Durumu Seçiniz...",
                language: {
                    noResults: function (params) {
                        return "Hiç kayıt bulunamadı.";
                    }
                },
                data: odemeDurumTipListesi,
                escapeMarkup: function (markup) {
                    return markup;
                },
                templateResult: templateData,
                templateSelection: templateDataSelection
            }).val('').trigger('change');
            @if(siparis.SiparisId > 0)
            {
                @: $('#dropDownOdemeDurum').val('@(siparis.OdemeDurumTipId)').trigger('change');
            }

            $('#dropDownOdemeTip').select2({
                placeholder: "Ödeme Tipi Seçiniz...",
                language: {
                    noResults: function (params) {
                        return "Hiç kayıt bulunamadı.";
                    }
                },
                data: siparisOdemeTipListesi,
                escapeMarkup: function (markup) {
                    return markup;
                },
                templateResult: templateData,
                templateSelection: templateDataSelection
            }).val('').trigger('change');
            @if(siparis.SiparisId > 0)
            {
                @: $('#dropDownOdemeTip').val('@(siparis.SiparisOdemeTipId)').trigger('change');
            }

            $('#dropDownFaturaAdresFaturaTipi').select2({
                placeholder: "Fatura Tipi Seçiniz...",
                allowClear: true,
                language: {
                    noResults: function (params) {
                        return "Hiç kayıt bulunamadı.";
                    }
                },
                data: faturaTipListesi,
                escapeMarkup: function (markup) {
                    return markup;
                },
                templateResult: templateData,
                templateSelection: templateDataSelection
            }).val('').trigger('change');
            @if(siparis.SiparisId > 0)
            {
                @: $('#dropDownFaturaAdresFaturaTipi').val('@(siparis.Adres1.FaturaTipId)').trigger('change');
            }

            $('#dropDownGonderimAdresFaturaTipi').select2({
                placeholder: "Fatura Tipi Seçiniz...",
                allowClear: true,
                language: {
                    noResults: function (params) {
                        return "Hiç kayıt bulunamadı.";
                    }
                },
                data: faturaTipListesi,
                escapeMarkup: function (markup) {
                    return markup;
                },
                templateResult: templateData,
                templateSelection: templateDataSelection
            }).val('').trigger('change');
            @if(siparis.SiparisId > 0)
            {
                @: $('#dropDownGonderimAdresFaturaTipi').val('@(siparis.Adres.FaturaTipId)').trigger('change');
            }

            $('#dropDownFaturaAdresIlce').select2({
                placeholder: "İlçe Seçiniz...",
                disabled: true,
                allowClear: true,
                language: {
                    noResults: function (params) {
                        return "Hiç kayıt bulunamadı.";
                    }
                },
                data: null,
                escapeMarkup: function (markup) {
                    return markup;
                },
                templateResult: templateData,
                templateSelection: templateDataSelection
            }).val('').trigger('change');
            $('#dropDownGonderimAdresIlce').select2({
                placeholder: "İlçe Seçiniz...",
                disabled: true,
                allowClear: true,
                language: {
                    noResults: function (params) {
                        return "Hiç kayıt bulunamadı.";
                    }
                },
                data: null,
                escapeMarkup: function (markup) {
                    return markup;
                },
                templateResult: templateData,
                templateSelection: templateDataSelection
            }).val('').trigger('change');

            $('#dropDownFaturaAdresIl').select2({
                placeholder: "İl Seçiniz...",
                allowClear: true,
                language: {
                    noResults: function (params) {
                        return "Hiç kayıt bulunamadı.";
                    }
                },
                data: ilListesi,
                escapeMarkup: function (markup) {
                    return markup;
                },
                templateResult: templateData,
                templateSelection: templateDataSelection
            }).on('change', function () {
                if ($('#dropDownFaturaAdresIl').val() != null && $('#dropDownFaturaAdresIl').val() != '') {
                    var chsnIlId = parseInt($('#dropDownFaturaAdresIl').val());
                    var ilceler = null;
                    ilceler = $.grep(ilceListesi, function (a) {
                        return a.ilId === chsnIlId;
                    });

                    $('#dropDownFaturaAdresIlce').select2('destroy');
                    $('#dropDownFaturaAdresIlce').empty();

                    $('#dropDownFaturaAdresIlce').select2({
                        placeholder: "İlçe Seçiniz...",
                        disabled: false,
                        allowClear: true,
                        language: {
                            noResults: function (params) {
                                return "Hiç kayıt bulunamadı.";
                            }
                        },
                        data: ilceler,
                        escapeMarkup: function (markup) {
                            return markup;
                        },
                        templateResult: templateData,
                        templateSelection: templateDataSelection
                    }).val('').trigger('change');
                } else {
                    $('#dropDownFaturaAdresIlce').select2('destroy');
                    $('#dropDownFaturaAdresIlce').empty();

                    $('#dropDownFaturaAdresIlce').select2({
                        placeholder: "İlçe Seçiniz...",
                        disabled: true,
                        allowClear: true,
                        language: {
                            noResults: function (params) {
                                return "Hiç kayıt bulunamadı.";
                            }
                        },
                        data: null,
                        escapeMarkup: function (markup) {
                            return markup;
                        },
                        templateResult: templateData,
                        templateSelection: templateDataSelection
                    }).val('').trigger('change');
                }
            }).val('').trigger('change');
            @if(siparis.SiparisId > 0)
            {
                @: $('#dropDownFaturaAdresIl').val('@(siparis.Adres1.AdresIlId)').trigger('change');
                @: $('#dropDownFaturaAdresIlce').val('@(siparis.Adres1.AdresIlceId)').trigger('change');
            }

            $('#dropDownGonderimAdresIl').select2({
                placeholder: "İl Seçiniz...",
                allowClear: true,
                language: {
                    noResults: function (params) {
                        return "Hiç kayıt bulunamadı.";
                    }
                },
                data: ilListesi,
                escapeMarkup: function (markup) {
                    return markup;
                },
                templateResult: templateData,
                templateSelection: templateDataSelection
            }).on('change', function () {
                if ($('#dropDownGonderimAdresIl').val() != null && $('#dropDownGonderimAdresIl').val() != '') {
                    var chsnIlId = parseInt($('#dropDownGonderimAdresIl').val());
                    var ilceler = null;
                    ilceler = $.grep(ilceListesi, function (a) {
                        return a.ilId === chsnIlId;
                    });

                    $('#dropDownGonderimAdresIlce').select2('destroy');
                    $('#dropDownGonderimAdresIlce').empty();

                    $('#dropDownGonderimAdresIlce').select2({
                        placeholder: "İlçe Seçiniz...",
                        disabled: false,
                        allowClear: true,
                        language: {
                            noResults: function (params) {
                                return "Hiç kayıt bulunamadı.";
                            }
                        },
                        data: ilceler,
                        escapeMarkup: function (markup) {
                            return markup;
                        },
                        templateResult: templateData,
                        templateSelection: templateDataSelection
                    }).val('').trigger('change');
                } else {
                    $('#dropDownGonderimAdresIlce').select2('destroy');
                    $('#dropDownGonderimAdresIlce').empty();

                    $('#dropDownGonderimAdresIlce').select2({
                        placeholder: "İlçe Seçiniz...",
                        disabled: true,
                        allowClear: true,
                        language: {
                            noResults: function (params) {
                                return "Hiç kayıt bulunamadı.";
                            }
                        },
                        data: null,
                        escapeMarkup: function (markup) {
                            return markup;
                        },
                        templateResult: templateData,
                        templateSelection: templateDataSelection
                    }).val('').trigger('change');
                }
            }).val('').trigger('change');
            @if(siparis.SiparisId > 0)
            {
                @: $('#dropDownGonderimAdresIl').val('@(siparis.Adres.AdresIlId)').trigger('change');
                @: $('#dropDownGonderimAdresIlce').val('@(siparis.Adres.AdresIlceId)').trigger('change');
            }

            $('#dropDownGonderimTipi').select2({
                placeholder: "Gönderim Tipi Seçiniz...",
                allowClear: true,
                language: {
                    noResults: function (params) {
                        return "Hiç kayıt bulunamadı.";
                    }
                },
                data: gonderimTipiListesi,
                escapeMarkup: function (markup) {
                    return markup;
                },
                templateResult: templateData,
                templateSelection: templateDataSelection
            }).val('').trigger('change');
            $('.gonderim-tipi').select2({
                placeholder: "Gönderim Tipi Seçiniz...",
                language: {
                    noResults: function (params) {
                        return "Hiç kayıt bulunamadı.";
                    }
                },
                data: gonderimTipiListesi,
                escapeMarkup: function (markup) {
                    return markup;
                },
                templateResult: templateData,
                templateSelection: templateDataSelection
            });
            $('#dropDownTeslimZamaniTipi').select2({
                placeholder: "Teslim Zamanı Tipi Seçiniz...",
                allowClear: true,
                language: {
                    noResults: function (params) {
                        return "Hiç kayıt bulunamadı.";
                    }
                },
                data: teslimZamaniTipiListesi,
                escapeMarkup: function (markup) {
                    return markup;
                },
                templateResult: templateData,
                templateSelection: templateDataSelection
            }).val('').trigger('change');
            $('.teslim-tipi').select2({
                placeholder: "Teslim Zamanı Tipi Seçiniz...",
                language: {
                    noResults: function (params) {
                        return "Hiç kayıt bulunamadı.";
                    }
                },
                data: teslimZamaniTipiListesi,
                escapeMarkup: function (markup) {
                    return markup;
                },
                templateResult: templateData,
                templateSelection: templateDataSelection
            });

            $('#comform_2').validate({
                errorElement: 'span',
                errorClass: 'help-block help-block-error',
                focusInvalid: false,
                ignore: "",
                invalidHandler: validationInvalidHandler,
                rules: {
                    txtFaturaAdresTcNo: {
                        maxlength: 11,
                        tcKimlikNo: true,
                        number: true,
                        buyukSifir: true,
                        required: true
                    },
                    txtFaturaAdresAdresAdi: {
                        maxlength: 50,
                        required: true
                    },
                    dropDownFaturaAdresFaturaTipi: {
                        required: true
                    },
                    txtFaturaAdresAd: {
                        maxlength: 200,
                        required: true
                    },
                    txtFaturaAdresSoyad: {
                        maxlength: 200,
                        required: true
                    },
                    txtFaturaAdresVergiNo: {
                        maxlength: 10,
                        required: false
                    },
                    txtFaturaAdresVergiDairesi: {
                        maxlength: 200,
                        required: false
                    },
                    txtFaturaAdresSirket: {
                        maxlength: 200,
                        required: false
                    },
                    txtFaturaAdresAciklama: {
                        maxlength: 250,
                        required: false
                    },
                    txtFaturaAdresAdres: {
                        maxlength: 500,
                        required: true
                    },
                    dropDownFaturaAdresIl: {
                        required: true
                    },
                    dropDownFaturaAdresIlce: {
                        required: true
                    },
                    txtFaturaAdresTelefon1: {
                        required: true
                    },
                    txtFaturaAdresPostaKodu: {
                        number: true,
                        buyukSifir: true,
                        required: true
                    },
                    txtGonderimAdresTcNo: {
                        maxlength: 11,
                        tcKimlikNo: true,
                        number: true,
                        buyukSifir: true,
                        required: true
                    },
                    txtGonderimAdresAdresAdi: {
                        maxlength: 50,
                        required: true
                    },
                    dropDownGonderimAdresFaturaTipi: {
                        required: true
                    },
                    txtGonderimAdresAd: {
                        maxlength: 200,
                        required: true
                    },
                    txtGonderimAdresSoyad: {
                        maxlength: 200,
                        required: true
                    },
                    txtGonderimAdresVergiNo: {
                        maxlength: 10,
                        required: false
                    },
                    txtGonderimAdresVergiDairesi: {
                        maxlength: 200,
                        required: false
                    },
                    txtGonderimAdresSirket: {
                        maxlength: 200,
                        required: false
                    },
                    txtGonderimAdresAciklama: {
                        maxlength: 250,
                        required: false
                    },
                    txtGonderimAdresAdres: {
                        maxlength: 500,
                        required: true
                    },
                    dropDownGonderimAdresIl: {
                        required: true
                    },
                    dropDownGonderimAdresIlce: {
                        required: true
                    },
                    txtGonderimAdresTelefon1: {
                        required: true
                    },
                    txtGonderimAdresPostaKodu: {
                        number: true,
                        buyukSifir: true,
                        required: true
                    }
                },
                errorPlacement: function (error, element) {
                    var icon = $(element).parent('.input-icon').children('i');
                    icon.removeClass('fa-check').addClass("fa-warning");
                    icon.attr("data-original-title", error.text()).tooltip({ 'container': 'body' });
                },
                highlight: function (element) {
                    $(element)
                        .closest('.form-group').removeClass("has-success").addClass('has-error');
                },
                unhighlight: function (element) {

                },
                success: function (label, element) {
                    var icon = $(element).parent('.input-icon').children('i');
                    $(element).closest('.form-group').removeClass('has-error').addClass('has-success');
                    icon.removeClass("fa-warning").addClass("fa-check");
                },
                submitHandler: function (e) {
                    adresGuncelle();
                }
            });
            $('.select2', $('#comform_2')).change(function () {
                $('#comform_2').validate().element($(this));
            });

            $('#comform_3').validate({
                errorElement: 'span',
                errorClass: 'help-block help-block-error',
                focusInvalid: false,
                ignore: "",
                invalidHandler: validationInvalidHandler,
                rules: {
                    dropDownGonderimTipi: {
                        required: true
                    },
                    dropDownTeslimZamaniTipi: {
                        required: true
                    },
                    dateTimeGonderimTarihi: {
                        required: true
                    },
                    txtGonderimAdet: {
                        number: true,
                        buyukSifir: true,
                        required: true
                    }
                },
                errorPlacement: function (error, element) {
                    var icon = $(element).parent('.input-icon').children('i');
                    icon.removeClass('fa-check').addClass("fa-warning");
                    icon.attr("data-original-title", error.text()).tooltip({ 'container': 'body' });
                },
                highlight: function (element) {
                    $(element)
                        .closest('.form-group').removeClass("has-success").addClass('has-error');
                },
                unhighlight: function (element) {

                },
                success: function (label, element) {
                    var icon = $(element).parent('.input-icon').children('i');
                    $(element).closest('.form-group').removeClass('has-error').addClass('has-success');
                    icon.removeClass("fa-warning").addClass("fa-check");
                },
                submitHandler: function (e) {
                    siparisGonderimEkle();
                }
            });
            $('.select2', $('#comform_3')).change(function () {
                $('#comform_3').validate().element($(this));
            });
            $('.input-group.date .form-control', $('#comform_3')).change(function () {
                $('#comform_3').validate().element($(this));
            });

            $('#comform_4').validate({
                errorElement: 'span',
                errorClass: 'help-block help-block-error',
                focusInvalid: false,
                ignore: "",
                invalidHandler: validationInvalidHandler,
                rules: {
                    txtHareketAciklama: {
                        maxlength: 500,
                        required: true
                    },
                    dateTimeHareketTarih: {
                        required: true
                    }
                },
                errorPlacement: function (error, element) {
                    var icon = $(element).parent('.input-icon').children('i');
                    icon.removeClass('fa-check').addClass("fa-warning");
                    icon.attr("data-original-title", error.text()).tooltip({ 'container': 'body' });
                },
                highlight: function (element) {
                    $(element)
                        .closest('.form-group').removeClass("has-success").addClass('has-error');
                },
                unhighlight: function (element) {

                },
                success: function (label, element) {
                    var icon = $(element).parent('.input-icon').children('i');
                    $(element).closest('.form-group').removeClass('has-error').addClass('has-success');
                    icon.removeClass("fa-warning").addClass("fa-check");
                },
                submitHandler: function (e) {
                    siparisHareketEkle();
                }
            });
            $('.input-group.date .form-control', $('#comform_4')).change(function () {
                $('#comform_4').validate().element($(this));
            });
        });

        function templateData(obj) {
            if (obj.id == '')
                return obj.text;

            if (obj.aktif) {
                return obj.text;
            } else {
                return '<span style="color:red;">' + obj.text + ' (Pasif)</span>';
            }
        }
        function templateDataSelection(obj) {
            if (obj.id == '')
                return obj.text;

            if (obj.aktif) {
                return obj.text;
            } else {
                return '<span style="color:red;">' + obj.text + ' (Pasif)</span>';
            }
        }

        function siparisGuncelle() {
            if ($('#dropDownSiparisDurum').val() == null || $('#dropDownSiparisDurum').val() == '') {
                callAlert('warning', 'Lütfen Sipariş Durumu Seçiniz.');
                return false;
            }
            if ($('#dropDownOdemeDurum').val() == null || $('#dropDownOdemeDurum').val() == '') {
                callAlert('warning', 'Lütfen Ödeme Durumu Seçiniz.');
                return false;
            }
            if ($('#dropDownOdemeTip').val() == null || $('#dropDownOdemeTip').val() == '') {
                callAlert('warning', 'Lütfen Ödeme Tipi Seçiniz.');
                return false;
            }

            var data = {
                SiparisId: parseInt($('#hdnSiparisId').val()),
                SiparisOdemeTipId: $('#dropDownOdemeTip').val(),
                SiparisDurumTipId: $('#dropDownSiparisDurum').val(),
                OdemeDurumTipId: $('#dropDownOdemeDurum').val(),
                AktifMi: $('#txtIskontoAktif').is(":checked") ? true : false
            };

            $.ajax({
                url: '/Siparis/SiparisKaydetGuncelle',
                data: JSON.stringify(data),
                type: "post",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    showLoadingModal();
                },
                success: function (result) {
                    hideLoadingModal();
                    if (result > 0) {
                        callAlert('success', 'Güncelleme işlemi başarılı.');
                        setTimeout(function myfunction() {
                            window.location.href = '/Siparis/Save/' + result;
                        }, 1500);
                    }
                    else {
                        callAlert('error', 'İşlem sırasında bir sorun oluştu. Lütfen tekrar deneyin.');
                    }
                },
                error: function () {
                    hideLoadingModal();
                    callAlert('error', 'Beklenmedik bir sorun oluştu. Lütfen tekrar deneyin.');
                }
            });
        }

        function adresGuncelle() {
            var faturaAdres = {
                AdresId: $('#hdnFaturaAdresId').val(),
                TcNo: $('#txtFaturaAdresTcNo').val(),
                FaturaTipId: $('#dropDownFaturaAdresFaturaTipi').val(),
                AdresAdi: $('#txtFaturaAdresAdresAdi').val(),
                Ad: $('#txtFaturaAdresAd').val(),
                Soyad: $('#txtFaturaAdresSoyad').val(),
                FirmaUnvan: $('#txtFaturaAdresSirket').val(),
                VergiNo: $('#txtFaturaAdresVergiNo').val(),
                VergiDairesi: $('#txtFaturaAdresVergiDairesi').val(),
                AdresBilgi: $('#txtFaturaAdresAdres').val(),
                Aciklama: $('#txtFaturaAdresAciklama').val(),
                PostaKodu: $('#txtFaturaAdresPostaKodu').val(),
                AdresIlceId: $('#dropDownFaturaAdresIlce').val(),
                AdresIlId: $('#dropDownFaturaAdresIl').val(),
                Telefon1: $('#txtFaturaAdresTelefon1').val(),
                Telefon2: $('#txtFaturaAdresTelefon2').val(),
                AktifMi: $('#txtFaturaAdresAktifMi').is(':checked')
            }

            var gonderimAdres = {
                AdresId: $('#hdnGonderimAdresId').val(),
                TcNo: $('#txtGonderimAdresTcNo').val(),
                FaturaTipId: $('#dropDownGonderimAdresFaturaTipi').val(),
                AdresAdi: $('#txtGonderimAdresAdresAdi').val(),
                Ad: $('#txtGonderimAdresAd').val(),
                Soyad: $('#txtGonderimAdresSoyad').val(),
                FirmaUnvan: $('#txtGonderimAdresSirket').val(),
                VergiNo: $('#txtGonderimAdresVergiNo').val(),
                VergiDairesi: $('#txtGonderimAdresVergiDairesi').val(),
                AdresBilgi: $('#txtGonderimAdresAdres').val(),
                Aciklama: $('#txtGonderimAdresAciklama').val(),
                PostaKodu: $('#txtGonderimAdresPostaKodu').val(),
                AdresIlceId: $('#dropDownGonderimAdresIlce').val(),
                AdresIlId: $('#dropDownGonderimAdresIl').val(),
                Telefon1: $('#txtGonderimAdresTelefon1').val(),
                Telefon2: $('#txtGonderimAdresTelefon2').val(),
                AktifMi: $('#txtGonderimAdresAktifMi').is(':checked')
            }

            $.ajax({
                url: '/Siparis/AdresKaydetGuncelle',
                data: JSON.stringify({ faturaAdres: faturaAdres, gonderimAdres: gonderimAdres }),
                type: "post",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    showLoadingModal();
                },
                success: function (result) {
                    hideLoadingModal();
                    if (result) {
                        callAlert('success', 'Güncelleme işlemi başarılı.');
                        setTimeout(function myfunction() {
                            window.location.href = '/Siparis/Save/' + $('#hdnSiparisId').val();
                        }, 1500);
                    }
                    else {
                        callAlert('error', 'İşlem sırasında bir sorun oluştu. Lütfen tekrar deneyin.');
                    }
                },
                error: function () {
                    hideLoadingModal();
                    callAlert('error', 'Beklenmedik bir sorun oluştu. Lütfen tekrar deneyin.');
                }
            });
        }

        function siparisDetayGuncelle(id) {
            var data = {
                siparisDetayId: id,
                aktifMi: $('#txtSiparisDetayAktif' + id).is(":checked") ? true : false
            };

            $.ajax({
                url: '/Siparis/SiparisDetayAktiflikGuncelle',
                data: JSON.stringify(data),
                type: "post",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    showLoadingModal();
                },
                success: function (result) {
                    hideLoadingModal();

                    if (!result) {
                        callAlert('error', 'İşlem sırasında bir sorun oluştu. Lütfen tekrar deneyin.');
                    } else {
                        callAlert('success', 'Sipariş detayı başarıyla güncellendi.');
                    }
                },
                error: function () {
                    hideLoadingModal();
                    callAlert('error', 'Beklenmedik bir sorun oluştu. Lütfen tekrar deneyin.');
                }
            });
        }

        function detayGoster(title, url) {
            showLoadingModal();
            $('#divDetay').html('');
            $('#detayModal .modal-title').text(title);

            $('#divDetay').load(url, function () {
                $('#detayModal').modal('show');
                hideLoadingModal();
            });
        }

        // Sipariş Gönderim İşlemleri
        function siparisGonderimEkle() {
            if (!$('input[type="radio"][name="radioDetay"]').is(':checked')) {
                callAlert('warning', 'Lütfen gönderim kaydı yapılacak sipariş detayı seçiniz.');
                return false;
            }

            // Sipariş detay gönderilecek adet kontrol
            var siparisDetayId = $('input[type="radio"][name="radioDetay"]:checked').closest('tr').attr('data-siparisdetayid');
            var adet = $('#txtGonderimAdet').val();

            $.ajax({
                url: '/SiparisGonderim/SiparisGonderimAdetKontrol',
                data: JSON.stringify({ siparisDetayId: siparisDetayId, adet: adet }),
                type: "post",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    showLoadingModal();
                },
                success: function (result) {
                    hideLoadingModal();

                    if (!result.flag) {
                        callAlert('warning', result.message);
                    } else {
                        var data = {
                            SiparisDetayId: siparisDetayId,
                            GonderimId: $('#dropDownGonderimTipi').val(),
                            TeslimZamaniId: ($('#dropDownTeslimZamaniTipi').val() != null && $('#dropDownTeslimZamaniTipi').val() != '') ? $('#dropDownTeslimZamaniTipi').val() : null,
                            TakipNo: $('#txtGonderimTakipNo').val(),
                            Adet: adet,
                            Aciklama: $('#txtGonderimAciklama').val(),
                            GonderimTarihi: $('#dateTimeGonderimTarihi').find('input').val() != '' ? $('#dateTimeGonderimTarihi').datepicker('getDate').toUTCString() : null,
                            TeslimTarihi: $('#dateTimeTeslimTarihi').find('input').val() != '' ? $('#dateTimeTeslimTarihi').datepicker('getDate').toUTCString() : null,
                            AktifMi: $('#txtGonderimAktif').is(":checked") ? true : false
                        };

                        $.ajax({
                            url: '/SiparisGonderim/SiparisGonderimKaydetGuncelle',
                            data: JSON.stringify(data),
                            type: "post",
                            dataType: "json",
                            contentType: "application/json; charset=utf-8",
                            beforeSend: function () {
                                showLoadingModal();
                            },
                            success: function (result) {
                                hideLoadingModal();
                                if (result > 0) {
                                    callAlert('success', 'Sipariş gönderimi ekleme işlemi başarılı.');
                                    setTimeout(function () {
                                        window.location.href = '/Siparis/Save/' + $('#hdnSiparisId').val();
                                    }, 1500);
                                }
                                else {
                                    callAlert('error', 'İşlem sırasında bir sorun oluştu. Lütfen tekrar deneyin.');
                                }
                            },
                            error: function () {
                                hideLoadingModal();
                                callAlert('error', 'Beklenmedik bir sorun oluştu. Lütfen tekrar deneyin.');
                            }
                        });
                    }
                },
                error: function () {
                    hideLoadingModal();
                    callAlert('error', 'Beklenmedik bir sorun oluştu. Lütfen tekrar deneyin.');
                }
            });
        }

        function siparisGonderimTemizle() {
            $('#dropDownGonderimTipi').val('').trigger('change');
            $('#dropDownTeslimZamaniTipi').val('').trigger('change');
            $('#txtGonderimTakipNo').val('');
            $('#txtGonderimAciklama').val('');
            $('#dateTimeGonderimTarihi').data('datepicker').setDate(null);
            $('#dateTimeTeslimTarihi').data('datepicker').setDate(null);
            $('#txtGonderimAdet').val('');

            var validator = $('#comform_3').validate();
            validator.resetForm();

            $('#comform_3').find('.form-group').removeClass('has-error').removeClass('has-success');
            $('#comform_3').find('.form-group .input-icon').children('i').removeClass('fa-check').removeClass("fa-warning");
        }
        function editModeGonderim(id, obj) {
            $('#tableSiparisGonderim .data-edit').addClass('none');
            $('#tableSiparisGonderim .data-show').removeClass('none');

            var trRow = $(obj).closest('tr').addClass('none');
            $('#tableSiparisGonderim .data-edit[data-id="' + id + '"]').removeClass('none');
        }

        function cancelModeGonderim(id, obj) {
            $('#tableSiparisGonderim .data-edit').addClass('none');
            $('#tableSiparisGonderim .data-show').removeClass('none');
        }

        function saveModeGonderim(id, obj) {
            var trRow = $(obj).closest('tr');

            var siparisDetayId = trRow.attr('data-siparisdetayid');
            var adet = $('#gonderimadet-' + id).val();

            if (adet == '' || parseInt(adet) == 0) {
                callAlert('warning', 'Adet 0\' dan büyük bir değer girilmeli.');
                return false;
            }

            if ($('#gonderimgonderimtarihi-' + id).find('input').val() == '') {
                callAlert('warning', 'Gönderim tarihi girilmeli.');
                return false;
            }

            $.ajax({
                url: '/SiparisGonderim/SiparisGonderimAdetKontrol',
                data: JSON.stringify({ siparisDetayId: siparisDetayId, adet: adet }),
                type: "post",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    showLoadingModal();
                },
                success: function (result) {
                    hideLoadingModal();

                    if (!result.flag) {
                        callAlert('warning', result.message);
                    } else {
                        var takipNo = $('#gonderimtakipno-' + id).val();
                        var aciklama = $('#gonderimaciklama-' + id).val();
                        var gonderimTipiId = $('#gonderimgonderimtipi-' + id).val();
                        var gonderimTipiText = $('#gonderimgonderimtipi-' + id).select2('data')[0].text;
                        var teslimZamaniTipiId = $('#gonderimteslimzamanitipi-' + id).val();
                        var teslimZamaniTipiText = $('#gonderimteslimzamanitipi-' + id).select2('data')[0].text;
                        var gonderimTarihi = $('#gonderimgonderimtarihi-' + id).find('input').val() != '' ? $('#gonderimgonderimtarihi-' + id).datepicker('getDate').toUTCString() : null;
                        var gonderimTarihiText = $('#gonderimgonderimtarihi-' + id).find('input').val();
                        var teslimTarihi = $('#gonderimteslimtarihi-' + id).find('input').val() != '' ? $('#gonderimteslimtarihi-' + id).datepicker('getDate').toUTCString() : null;
                        var teslimTarihiText = $('#gonderimteslimtarihi-' + id).find('input').val();
                        var aktifmi = $('#gonderimaktif-' + id).is(":checked") ? true : false;

                        var data = {
                            SiparisGonderimId: id,
                            GonderimId: gonderimTipiId,
                            TeslimZamaniId: teslimZamaniTipiId,
                            TakipNo: takipNo,
                            Adet: adet,
                            Aciklama: aciklama,
                            GonderimTarihi: gonderimTarihi,
                            TeslimTarihi: teslimTarihi,
                            AktifMi: aktifmi
                        };

                        $.ajax({
                            url: '/SiparisGonderim/SiparisGonderimKaydetGuncelle',
                            data: JSON.stringify(data),
                            type: "post",
                            dataType: "json",
                            contentType: "application/json; charset=utf-8",
                            beforeSend: function () {
                                showLoadingModal();
                            },
                            success: function (result) {
                                hideLoadingModal();
                                if (result) {
                                    callAlert('success', 'Sipariş gönderimi güncelleme işlemi başarılı.');

                                    var trRow = $('#tableSiparisGonderim .data-show[data-id="' + id + '"]');

                                    trRow.find('.sg-takipno').html(takipNo);
                                    trRow.find('.sg-adet').html(adet);
                                    trRow.find('.sg-aciklama').html(aciklama);
                                    trRow.find('.sg-gonderimtipi').html(gonderimTipiText);
                                    trRow.find('.sg-teslimzamanitipi').html(teslimZamaniTipiText);
                                    trRow.find('.sg-gonderimtarihi').html(gonderimTarihiText);
                                    trRow.find('.sg-teslimtarihi').html(teslimTarihiText);

                                    $('#gonderimaktifmi-' + id).bootstrapSwitch('destroy').prop('checked', aktifmi).bootstrapSwitch();

                                    $('#tableSiparisGonderim .data-edit').addClass('none');
                                    $('#tableSiparisGonderim .data-show').removeClass('none');
                                }
                                else {
                                    callAlert('error', 'İşlem sırasında bir sorun oluştu. Lütfen tekrar deneyin.');
                                }
                            },
                            error: function () {
                                hideLoadingModal();
                                callAlert('error', 'Beklenmedik bir sorun oluştu. Lütfen tekrar deneyin.');
                            }
                        });
                    }
                },
                error: function () {
                    hideLoadingModal();
                    callAlert('error', 'Beklenmedik bir sorun oluştu. Lütfen tekrar deneyin.');
                }
            });
        }

        // Sipariş Hareket İşlemleri
        function siparisHareketEkle() {
            var data = {
                SiparisId: $('#hdnSiparisId').val(),
                Aciklama: $('#txtHareketAciklama').val(),
                KullaniciyaGosterilecekMi: $('#txtHareketKullaniciGoster').is(":checked") ? true : false,
                Tarih: $('#dateTimeHareketTarih').find('input').val() != '' ? $('#dateTimeHareketTarih').datepicker('getDate').toUTCString() : null,
                AktifMi: $('#txtHareketAktif').is(":checked") ? true : false
            };

            $.ajax({
                url: '/Siparis/SiparisHareketKaydetGuncelle',
                data: JSON.stringify(data),
                type: "post",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    showLoadingModal();
                },
                success: function (result) {
                    hideLoadingModal();
                    if (result) {
                        callAlert('success', 'Sipariş hareketi ekleme işlemi başarılı.');
                        setTimeout(function myfunction() {
                            window.location.href = '/Siparis/Save/' + $('#hdnSiparisId').val();
                        }, 1500);
                    }
                    else {
                        callAlert('error', 'İşlem sırasında bir sorun oluştu. Lütfen tekrar deneyin.');
                    }
                },
                error: function () {
                    hideLoadingModal();
                    callAlert('error', 'Beklenmedik bir sorun oluştu. Lütfen tekrar deneyin.');
                }
            });
        }

        function siparisHareketTemizle() {
            $('#txtHareketAciklama').val('');
            $('#dateTimeHareketTarih').data('datepicker').setDate(null);

            var validator = $('#comform_4').validate();
            validator.resetForm();

            $('#comform_4').find('.form-group').removeClass('has-error').removeClass('has-success');
            $('#comform_4').find('.form-group .input-icon').children('i').removeClass('fa-check').removeClass("fa-warning");
        }
        function editModeHareket(id, obj) {
            $('#tableSiparisHareket .data-edit').addClass('none');
            $('#tableSiparisHareket .data-show').removeClass('none');

            var trRow = $(obj).closest('tr').addClass('none');
            $('#tableSiparisHareket .data-edit[data-id="' + id + '"]').removeClass('none');
        }

        function cancelModeHareket(id, obj) {
            $('#tableSiparisHareket .data-edit').addClass('none');
            $('#tableSiparisHareket .data-show').removeClass('none');
        }

        function saveModeHareket(id, obj) {
            var aciklama = $('#hareketaciklama-' + id).val();
            var tarih = $('#harekettarih-' + id).find('input').val() != '' ? $('#harekettarih-' + id).datepicker('getDate').toUTCString() : null;
            var tarihText = $('#harekettarih-' + id).find('input').val();
            var kullaniciGoster = $('#hareketkullanicigoster-' + id).is(":checked") ? true : false;
            var aktifmi = $('#hareketaktif-' + id).is(":checked") ? true : false;

            var data = {
                SiparisHareketId: id,
                SiparisId: $('#hdnSiparisId').val(),
                Aciklama: aciklama,
                KullaniciyaGosterilecekMi: kullaniciGoster,
                Tarih: tarih,
                AktifMi: aktifmi
            };

            $.ajax({
                url: '/Siparis/SiparisHareketKaydetGuncelle',
                data: JSON.stringify(data),
                type: "post",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    showLoadingModal();
                },
                success: function (result) {
                    hideLoadingModal();
                    if (result) {
                        callAlert('success', 'Sipariş hareketi güncelleme işlemi başarılı.');

                        var trRow = $('#tableSiparisHareket .data-show[data-id="' + id + '"]');

                        trRow.find('.sh-aciklama').html(aciklama);
                        trRow.find('.sh-tarih').html(tarihText);

                        $('#hareketkullanicigostermi-' + id).bootstrapSwitch('destroy').prop('checked', aktifmi).bootstrapSwitch();
                        $('#hareketaktifmi-' + id).bootstrapSwitch('destroy').prop('checked', aktifmi).bootstrapSwitch();

                        $('#tableSiparisHareket .data-edit').addClass('none');
                        $('#tableSiparisHareket .data-show').removeClass('none');
                    }
                    else {
                        callAlert('error', 'İşlem sırasında bir sorun oluştu. Lütfen tekrar deneyin.');
                    }
                },
                error: function () {
                    hideLoadingModal();
                    callAlert('error', 'Beklenmedik bir sorun oluştu. Lütfen tekrar deneyin.');
                }
            });
        }
    </script>
}