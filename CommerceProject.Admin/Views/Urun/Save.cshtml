@using CommerceProject.Business.Entities

@{
    ViewBag.Title = "Save";
    Layout = "~/Views/Shared/_MainRoot.cshtml";
}

@{ 
    var urun = ViewBag.Urun as Urun;
    var urunKategoriler = ViewBag.UrunKategoriler as List<UrunKategori>;
    var urunNitelikler = ViewBag.UrunNitelikler as List<UrunNitelik>;
    var urunResimler = ViewBag.UrunResimler as List<UrunResim>;
    var ilgiliUrunler = ViewBag.IlgiliUrunler as List<IlgiliUrun>;
    var urunYorumlar = ViewBag.UrunYorumlar as List<UrunYorum>;
    var urunSiparisler = ViewBag.UrunSiparisler as List<Siparis>;
    var urunOzellikler = ViewBag.UrunOzellikler as List<UrunOzellik>;

    var ozellikler = ViewBag.OzellikListesi as List<Ozellik>;
}

@section css{
    <link href="~/Content/Theme/assets/global/plugins/jstree/dist/themes/default/style.min.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
        .none {
            display: none;
        }

        .red-border {
            border: 1px solid red;
        }

        #tableResim tbody tr td {
            vertical-align: middle !important;
        }
    </style>
}

<div class="modal fade" id="detayModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" style="width:900px;">
        <div class="modal-content" style="width:900px;">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title"></h4>
            </div>
            <div class="modal-body" style="border-bottom: 1px solid #EFEFEF !important;">
                <div id="divDetay"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn red-haze" data-dismiss="modal">Kapat</button>
            </div>
        </div>
    </div>
</div>

<div class="portlet light bordered blue-hoki">
    <div class="portlet-title">
        <div class="caption">
            <i class="icon-puzzle font-white"></i>
            <span class="caption-subject bold font-white uppercase"> @ViewBag.PageProperties.PageHeader </span>
            <span class="caption-helper">@ViewBag.PageProperties.PageDescription</span>
        </div>
        <div class="btn-group pull-right">
            <button type="button" class="btn green btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                İşlemler
                <i class="fa fa-angle-down"></i>
            </button>
            <ul class="dropdown-menu pull-right" role="menu">
                <li>
                    <a href="/Urun/Save">
                        <i class="fa fa-save"></i> Yeni Kayıt
                    </a>
                </li>
                <li>
                    <a href="/Urun/Index">
                        <i class="fa fa-search"></i> Ürün İşlemleri
                    </a>
                </li>
                <li>
                    <a href="/Urun/Card">
                        <i class="fa fa-eye"></i> Ürün Kartı
                    </a>
                </li>
                <li>
                    <a href="/Urun/Search">
                        <i class="fa fa-search"></i> Arama
                    </a>
                </li>
                <li class="divider"></li>
                <li>
                    <a href="" class="fullscreen" data-original-title="Tam Ekran" title="Tam Ekran">
                        <i class="fa fa-arrows-alt"></i> Tam Ekran
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="portlet-body">
        <div class="portlet light bordered">
            <div class="portlet-body form">
                <div class="tabbable-custom">
                    <ul class="nav nav-tabs">
                        <li class="active">
                            <a href="#tab_1" data-toggle="tab"> Ürün Bilgileri </a>
                        </li>
                        <li>
                            <a href="#tab_5" data-toggle="tab"> Seo </a>
                        </li>
                        <li>
                            <a href="#tab_3" data-toggle="tab">
                                Ürün Nitelikleri
                            </a>
                        </li>
                        @if (urun.UrunId == 0)
                        {
                            <li class="disabled">
                                <a href="#tab_2"> 
                                Ürün Kategorileri
                                    <span class="badge badge-default" style="margin-top: -20px;margin-right: -12px;">0</span>
                                </a>
                            </li>
                            <li class="disabled">
                                <a href="#tab_9">
                                Ürün Özellikleri
                                    <span class="badge badge-default" style="margin-top: -20px;margin-right: -12px;">0</span>
                                </a>
                            </li>
                            <li class="disabled">
                                <a href="#tab_10">
                                    Örnek Dosya
                                </a>
                            </li>
                            <li class="disabled">
                                <a href="#tab_4"> 
                                Resimler
                                    <span class="badge badge-default" style="margin-top: -20px;margin-right: -12px;">0</span>
                                </a>
                            </li>
                            <li class="disabled">
                                <a href="#tab_6"> 
                                İlgili Ürünler
                                    <span class="badge badge-default" style="margin-top: -20px;margin-right: -12px;">0</span>
                                </a>
                            </li>
                            <li class="disabled">
                                <a href="#tab_7"> 
                                Yorumlar
                                    <span class="badge badge-default" style="margin-top: -20px;margin-right: -12px;">0</span>
                                </a>
                            </li>
                            <li class="disabled">
                                <a href="#tab_8"> 
                                Siparişler
                                    <span class="badge badge-default" style="margin-top: -20px;margin-right: -12px;">0</span>
                                </a>
                            </li>
                        }
                        else
                        {
                            <li>
                                <a href="#tab_2" data-toggle="tab"> 
                                Ürün Kategorileri
                                    <span class="badge badge-danger" style="margin-top: -20px;margin-right: -12px;">@urunKategoriler.Count</span>
                                </a>
                            </li>
                            <li>
                                <a href="#tab_9" data-toggle="tab">
                                Ürün Özellikleri
                                    <span class="badge badge-danger" style="margin-top: -20px;margin-right: -12px;">@urunOzellikler.Where(x => x.AktifMi == true).Count()</span>
                                </a>
                            </li>
                            <li>
                                <a href="#tab_10" data-toggle="tab">
                                    Örnek Dosya
                                </a>
                            </li>
                            <li>
                                <a href="#tab_4" data-toggle="tab"> 
                                    Resimler 
                                    <span class="badge badge-danger" style="margin-top: -20px;margin-right: -12px;">@urunResimler.Count</span>
                                </a>
                            </li>
                            <li>
                                <a href="#tab_6" data-toggle="tab"> 
                                İlgili Ürünler
                                    <span class="badge badge-danger" style="margin-top: -20px;margin-right: -12px;">@ilgiliUrunler.Count</span>
                                </a>
                            </li>
                            <li>
                                <a href="#tab_7" data-toggle="tab"> 
                                Yorumlar
                                    <span class="badge badge-danger" style="margin-top: -20px;margin-right: -12px;">@urunYorumlar.Count</span>
                                </a>
                            </li>
                            <li>
                                <a href="#tab_8" data-toggle="tab"> 
                                Siparişler
                                    <span class="badge badge-danger" style="margin-top: -20px;margin-right: -12px;">@urunSiparisler.Count</span>
                                </a>
                            </li>
                        }
                    </ul>

                    <form id="comform_1">
                        <input id="hdnUrunId" type="hidden" value="@urun.UrunId" />
                        <input id="hdnOrnekDosyaYolu" type="hidden" value="@urun.OrnekDosyaYolu" />

                        <div class="form-body tab-content" style="padding:10px !important;border: 1px solid #ddd !important;">
                            <div class="tab-pane active" id="tab_1">

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <div class="tabbable-line">
                                                <ul class="nav nav-tabs">
                                                    <li class="active">
                                                        <a href="#tab_1_1" data-toggle="tab"> Temel Bilgiler </a>
                                                    </li>
                                                    <li>
                                                        <a href="#tab_1_2" data-toggle="tab"> Özellikler </a>
                                                    </li>
                                                </ul>
                                                <div class="tab-content">

                                                    <div class="tab-pane active" id="tab_1_1">
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label for="txtUrunKodu" class="control-label">Ürün Kodu</label>
                                                                    <input id="txtUrunKodu" name="txtUrunKodu" class="form-control input-sm maxlength-handler" maxlength="100" placeholder="Ürün Kodu Giriniz..." value="@urun.UrunKod" tabindex="1">
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label for="txtBarkodNo" class="control-label">BarkodNo</label>
                                                                    <input id="txtBarkodNo" name="txtBarkodNo" class="form-control input-sm maxlength-handler" maxlength="50" placeholder="Barkod No Giriniz..." value="@urun.Barkod" tabindex="2">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label for="txtUrunAd" class="control-label">Ürün Adı<span class="required"> * </span></label>
                                                                    <div class="input-icon right">
                                                                        <i class="fa"></i>
                                                                        <input id="txtUrunAd" name="txtUrunAd" class="form-control input-sm maxlength-handler" maxlength="200" placeholder="Ürün Adı Giriniz..." value="@urun.Adi" tabindex="3">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label for="dropDownNitelikGrup" class="control-label">Nitelik Grubu<span class="required"> * </span></label>
                                                                    <div class="input-icon right">
                                                                        <i class="fa"></i>
                                                                        <select id="dropDownNitelikGrup" name="dropDownNitelikGrup" class="form-control select2" style="width:100%;" tabindex="4"></select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label for="dropDownMarka" class="control-label">Marka<span class="required"> * </span></label>
                                                                    <div class="input-icon right">
                                                                        <i class="fa"></i>
                                                                        <select id="dropDownMarka" name="dropDownMarka" class="form-control select2" style="width:100%;" tabindex="5"></select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label for="dropDownVergi" class="control-label">Vergi<span class="required"> * </span></label>
                                                                    <div class="input-icon right">
                                                                        <i class="fa"></i>
                                                                        <select id="dropDownVergi" name="dropDownVergi" class="form-control select2" style="width:100%;" tabindex="6"></select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <div class="form-group">
                                                                    <label for="txtUzunAciklama" class="control-label">Uzun Açıklama</label>
                                                                    <textarea id="txtUzunAciklama" name="txtUzunAciklama" class="form-control" rows="6" tabindex="7">@urun.UzunAciklama</textarea>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <div class="form-group">
                                                                    <label for="txtKisaAciklama" class="control-label">Kısa Açıklama</label>
                                                                    <input id="txtKisaAciklama" name="txtKisaAciklama" class="form-control input-sm maxlength-handler" maxlength="50" placeholder="Kısa Açıklama Giriniz..." value="@urun.KisaAciklama" tabindex="8">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-3">
                                                                <div class="form-group">
                                                                    <label for="txtYorumYap" class="control-label">Yorum Yapılabilsin mi?</label>
                                                                    <div class="icheck-inline">
                                                                        <input id="txtYorumYap" name="txtYorumYap" type="checkbox" class="make-switch" data-size="small" data-on-text="Evet" data-off-text="Hayır"
                                                                               @(urun.UrunId > 0 ? (urun.YorumYapilabilsinMi ? "checked" : "") : "checked") tabindex="12">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3">
                                                                <div class="form-group">
                                                                    <label for="txtOnSiparisAktif" class="control-label">Ön Sipariş Aktif mi?</label>
                                                                    <div class="icheck-inline">
                                                                        <input id="txtOnSiparisAktif" name="txtOnSiparisAktif" type="checkbox" class="make-switch" data-size="small" data-on-text="Evet" data-off-text="Hayır"
                                                                               @(urun.UrunId > 0 ? (urun.OnSiparisAktifMi ? "checked" : "") : "checked") tabindex="21">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label class="control-label">Sevk Başlangıç - Bitiş Tarihi</label>
                                                                    <div class="col-md-12" style="padding-left:0px !important;padding-right:0px !important;">
                                                                        <div class="col-md-6" style="padding-left:0px !important;">
                                                                            <div class="form-group">
                                                                                <div class="input-icon right">
                                                                                    <i class="fa"></i>
                                                                                    <div id="dateTimeBaslangicTarihi" name="dateTimeBaslangicTarihi" class="input-group date" data-provide="datepicker">
                                                                                        <input type="text" name="dateTimeBaslangicTarihi" class="form-control" placeholder="Başlangıç Tarihi"
                                                                                               value="@(urun.UrunId > 0 ? (urun.BaslangicTarihi.HasValue ? urun.BaslangicTarihi.Value.ToString("dd.MM.yyyy") : "") : "")" tabindex="9">
                                                                                        <div class="input-group-addon">
                                                                                            <span class="glyphicon glyphicon-th"></span>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-6" style="padding-right:0px !important;">
                                                                            <div class="form-group">
                                                                                <div class="input-icon right">
                                                                                    <i class="fa"></i>
                                                                                    <div id="dateTimeBitisTarihi" name="dateTimeBitisTarihi" class="input-group date" data-provide="datepicker">
                                                                                        <input type="text" name="dateTimeBitisTarihi" class="form-control" placeholder="Bitiş Tarihi"
                                                                                               value="@(urun.UrunId > 0 ? (urun.BitisTarihi.HasValue ? urun.BitisTarihi.Value.ToString("dd.MM.yyyy") : "") : "")" tabindex="10">
                                                                                        <div class="input-group-addon">
                                                                                            <span class="glyphicon glyphicon-th"></span>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-3">
                                                                <div class="form-group">
                                                                    <label for="txtStoktaVar" class="control-label">Stokta Var mı?</label>
                                                                    <div class="icheck-inline">
                                                                        <input id="txtStoktaVar" name="txtStoktaVar" type="checkbox" class="make-switch" data-size="small" data-on-text="Evet" data-off-text="Hayır"
                                                                               @(urun.UrunId > 0 ? (urun.StoktaVarMi ? "checked" : "") : "checked") tabindex="16">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3">
                                                                <div class="form-group">
                                                                    <label for="txtStokMiktarGoster" class="control-label">Stok Miktarı Gösterilsin mi?</label>
                                                                    <div class="icheck-inline">
                                                                        <input id="txtStokMiktarGoster" name="txtStokMiktarGoster" type="checkbox" class="make-switch" data-size="small" data-on-text="Evet" data-off-text="Hayır"
                                                                               @(urun.UrunId > 0 ? (urun.StokMiktariGosterilsinMi ? "checked" : "") : "checked") tabindex="17">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3">
                                                                <div class="form-group">
                                                                    <div class="form-group">
                                                                        <label for="txtStokMiktar" class="control-label">Stok Miktarı<span class="required"> * </span></label>
                                                                        <div class="input-icon right">
                                                                            <i class="fa"></i>
                                                                            <input id="txtStokMiktar" name="txtStokMiktar" class="form-control input-sm integer focus-sense" placeholder="Stok Miktarı Giriniz..."
                                                                                   value="@(urun.UrunId > 0 ? urun.StokMiktar.ToString() : "")" tabindex="13">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3">
                                                                <div class="form-group">
                                                                    <label for="txtStokAlarmSeviye" class="control-label">Stok Alarm Seviyesi<span class="required"> * </span></label>
                                                                    <div class="input-icon right">
                                                                        <i class="fa"></i>
                                                                        <input id="txtStokAlarmSeviye" name="txtStokAlarmSeviye" class="form-control input-sm integer focus-sense" placeholder="Stok Alarm Seviyesi Giriniz..."
                                                                               value="@(urun.UrunId > 0 ? urun.StokAlarmSeviyesi.ToString() : "")" tabindex="15">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label class="control-label">Minimum - Maximum Sipariş Miktarı <span class="required"> * </span></label>
                                                                    <div class="col-md-12" style="padding-left:0px !important;padding-right:0px !important;">
                                                                        <div class="col-md-6" style="padding-left:0px !important;">
                                                                            <div class="form-group">
                                                                                <div class="input-icon right">
                                                                                    <i class="fa"></i>
                                                                                    <input id="txtMinimumSiparisMiktar" name="txtMinimumSiparisMiktar" class="form-control input-sm integer focus-sense" placeholder="Minimum Sipariş Miktarı"
                                                                                           value="@(urun.UrunId > 0 ? urun.MinimumSiparisMiktari.ToString() : "")" tabindex="18">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-6" style="padding-right:0px !important;">
                                                                            <div class="form-group">
                                                                                <div class="input-icon right">
                                                                                    <i class="fa"></i>
                                                                                    <input id="txtMaximumSiparisMiktar" name="txtMaximumSiparisMiktar" class="form-control input-sm integer focus-sense" placeholder="Maximum Sipariş Miktarı"
                                                                                           value="@(urun.UrunId > 0 ? urun.MaksimumSiparisMiktari.ToString() : "")" tabindex="19">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3">
                                                                <div class="form-group">
                                                                    <label for="txtSatinAlAktif" class="control-label">Satın Alma Aktif mi?</label>
                                                                    <div class="icheck-inline">
                                                                        <input id="txtSatinAlAktif" name="txtSatinAlAktif" type="checkbox" class="make-switch" data-size="small" data-on-text="Evet" data-off-text="Hayır"
                                                                               @(urun.UrunId > 0 ? (urun.SatinAlAktifMi ? "checked" : "") : "checked") tabindex="20">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-3">
                                                                <div class="form-group">
                                                                    <label for="txtSira" class="control-label">Sıra<span class="required"> * </span></label>
                                                                    <div class="input-icon right">
                                                                        <i class="fa"></i>
                                                                        <input id="txtSira" name="txtSira" class="form-control input-sm integer focus-sense" placeholder="Sıra Giriniz..."
                                                                               value="@(urun.UrunId > 0 ? urun.Sira.ToString() : "")" tabindex="22">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3">
                                                                <div class="form-group">
                                                                    <label for="txtAktif" class="control-label">Aktif mi?</label>
                                                                    <div class="icheck-inline">
                                                                        <input id="txtAktif" name="txtAktif" type="checkbox" class="make-switch" data-size="small" data-on-text="Aktif" data-off-text="Pasif"
                                                                               @(urun.UrunId > 0 ? (urun.AktifMi ? "checked" : "") : "checked") tabindex="23">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="tab-pane" id="tab_1_2">
                                                        <div class="row">
                                                            <div class="col-md-3">
                                                                <div class="form-group">
                                                                    <label for="txtOzelFiyatAktifMi" class="control-label">Özel Fiyat Aktif mi?</label>
                                                                    <div class="icheck-inline">
                                                                        <input id="txtOzelFiyatAktifMi" name="txtOzelFiyatAktifMi" type="checkbox" class="make-switch" data-size="small" data-on-text="Evet" data-off-text="Hayır"
                                                                               @(urun.UrunId > 0 ? (urun.OzelFiyatAktifMi ? "checked" : "") : "checked") tabindex="5">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3">
                                                                <div class="form-group">
                                                                    <label for="txtOzelFiyat" class="control-label">Özel Fiyat</label>
                                                                    <div class="input-icon right">
                                                                        <i class="fa"></i>
                                                                        <input id="txtOzelFiyat" name="txtOzelFiyat" class="form-control input-sm decimal-4 focus-sense" placeholder="Özel Fiyat Giriniz..."
                                                                               value="@(urun.OzelFiyat.HasValue ? urun.OzelFiyat.Value.ToString("N4").Replace(".", "").Replace(",", ".") : "")" tabindex="6">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group">
                                                                    <label class="control-label">Özel Fiyat Başlangıç - Bitiş Tarihi</label>
                                                                    <div class="col-md-12" style="padding-left:0px !important;padding-right:0px !important;">
                                                                        <div class="col-md-6" style="padding-left:0px !important;">
                                                                            <div class="form-group">
                                                                                <div class="input-icon right">
                                                                                    <i class="fa"></i>
                                                                                    <div id="dateTimeOzelFiyatBaslangicTarihi" name="dateTimeOzelFiyatBaslangicTarihi" class="input-group date" data-provide="datepicker">
                                                                                        <input type="text" name="dateTimeOzelFiyatBaslangicTarihi" class="form-control" placeholder="Başlangıç Tarihi"
                                                                                               value="@(urun.UrunId > 0 ? (urun.OzelFiyatBaslangicTarihi.HasValue ? urun.OzelFiyatBaslangicTarihi.Value.ToString("dd.MM.yyyy") : "") : "")" tabindex="7">
                                                                                        <div class="input-group-addon">
                                                                                            <span class="glyphicon glyphicon-th"></span>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-6" style="padding-right:0px !important;">
                                                                            <div class="form-group">
                                                                                <div class="input-icon right">
                                                                                    <i class="fa"></i>
                                                                                    <div id="dateTimeOzelFiyatBitisTarihi" name="dateTimeOzelFiyatBitisTarihi" class="input-group date" data-provide="datepicker">
                                                                                        <input type="text" name="dateTimeOzelFiyatBitisTarihi" class="form-control" placeholder="Bitiş Tarihi"
                                                                                               value="@(urun.UrunId > 0 ? (urun.OzelFiyatBitisTarihi.HasValue ? urun.OzelFiyatBitisTarihi.Value.ToString("dd.MM.yyyy") : "") : "")" tabindex="8">
                                                                                        <div class="input-group-addon">
                                                                                            <span class="glyphicon glyphicon-th"></span>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-3">
                                                                <div class="form-group">
                                                                    <label for="txtFiyat" class="control-label">Fiyat<span class="required"> * </span></label>
                                                                    <div class="input-icon right">
                                                                        <i class="fa"></i>
                                                                        <input id="txtFiyat" name="txtFiyat" class="form-control input-sm decimal-4 focus-sense" placeholder="Fiyat Giriniz..."
                                                                               value="@(urun.UrunId > 0 ? urun.Fiyat.ToString("N4").Replace(".", "").Replace(",", ".") : "")" tabindex="9">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3">
                                                                <div class="form-group">
                                                                    <label for="txtEskiFiyat" class="control-label">Eski Fiyat<span class="required"> * </span></label>
                                                                    <div class="input-icon right">
                                                                        <i class="fa"></i>
                                                                        <input id="txtEskiFiyat" name="txtEskiFiyat" class="form-control input-sm decimal-4 focus-sense" placeholder="Eski Fiyat Giriniz..."
                                                                               value="@(urun.UrunId > 0 ? urun.EskiFiyat.ToString("N4").Replace(".", "").Replace(",", ".") : "")" tabindex="10">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-3">
                                                                <div class="form-group">
                                                                    <label for="txtMaliyet" class="control-label">Maliyet<span class="required"> * </span></label>
                                                                    <div class="input-icon right">
                                                                        <i class="fa"></i>
                                                                        <input id="txtMaliyet" name="txtMaliyet" class="form-control input-sm decimal-4 focus-sense" placeholder="Maliyet Giriniz..."
                                                                               value="@(urun.UrunId > 0 ? urun.Maliyet.ToString("N4").Replace(".", "").Replace(",", ".") : "")" tabindex="11">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <div class="col-md-offset-5 col-md-7">
                                        @if (urun.UrunId == 0)
                                        {
                                            <button type="submit" class="btn blue">
                                                Kaydet
                                                <i class="fa fa-save"></i>
                                            </button>
                                        }
                                        else
                                        {
                                            <button type="submit" class="btn yellow">
                                                Güncelle
                                                <i class="fa fa-edit"></i>
                                            </button>
                                        }
                                        <a href="/Urun/Index" class="btn red">
                                            İptal
                                            <i class="fa fa-close"></i>
                                        </a>
                                    </div>
                                </div>

                            </div>

                            <div class="tab-pane" id="tab_5">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="txtTags" class="control-label">Tags</label>
                                            <input id="txtTags" name="txtTags" class="form-control input-sm maxlength-handler" maxlength="500" placeholder="Tags Giriniz..." value="@urun.Tags" tabindex="1">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="txtMetaTitle" class="control-label">Meta Title</label>
                                            <input id="txtMetaTitle" name="txtMetaTitle" class="form-control input-sm maxlength-handler" maxlength="500" placeholder="Meta Title Giriniz..." value="@urun.MetaTitle" tabindex="2">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="txtMetaKeywords" class="control-label">Meta Keywords</label>
                                            <input id="txtMetaKeywords" name="txtMetaKeywords" class="form-control input-sm maxlength-handler" maxlength="500" placeholder="Meta Keywords Giriniz..." value="@urun.MetaKeywords" tabindex="3">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="txtMetaDescription" class="control-label">Meta Description</label>
                                            <input id="txtMetaDescription" name="txtMetaDescription" class="form-control input-sm maxlength-handler" maxlength="500" placeholder="Meta Description Giriniz..." value="@urun.MetaDescription" tabindex="4">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <div class="col-md-offset-5 col-md-7">
                                        @if (urun.UrunId == 0)
                                        {
                                            <button type="submit" class="btn blue" tabindex="5">
                                                Kaydet
                                                <i class="fa fa-save"></i>
                                            </button>
                                        }
                                        else
                                        {
                                            <button type="submit" class="btn yellow" tabindex="5">
                                                Güncelle
                                                <i class="fa fa-edit"></i>
                                            </button>
                                        }
                                        <a href="/Urun/Index" class="btn red" tabindex="6">
                                            İptal
                                            <i class="fa fa-close"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <div class="tab-pane" id="tab_2">

                                <div class="row">
                                    <div class="col-md-12 margin-bottom-10">
                                        <div class="alert alert-info no-margin margin-top-10"> <i class="fa fa-info-circle"></i> Kategori üzerine çift tıklayarak listeye ekleyebilirsiniz. </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <div id="kategoriTreeView">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-8">
                                        <div class="form-group">
                                            <div class="table-responsive">
                                                <table id="tableKategori" class="table table-striped table-bordered table-hover">
                                                    <thead>
                                                        <tr>
                                                            <th width="70%">Kategori Adı</th>
                                                            <th width="10%">Sıra</th>
                                                            <th width="10%">Aktif mi?</th>
                                                            <th width="10%">İşlemler</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @{
                                                            foreach (var kategori in urunKategoriler)
                                                            {
                                                                <tr data-kategoriid="@kategori.KategoriId" data-id="@kategori.UrunKategoriId">
                                                                    <td>@kategori.Kategori.Adi</td>
                                                                    <td>
                                                                        <input id="txtKategoriSira@(kategori.KategoriId)" type="text" class="form-control input-sm integer-5 focus-sense" placeholder="Sıra" value="@kategori.Sira" />
                                                                    </td>
                                                                    <td>
                                                                        <div class="icheck-inline">
                                                                            <input id="txtKategoriAktif@(kategori.KategoriId)" type="checkbox" class="make-switch" data-size="small" data-on-text="Aktif" data-off-text="Pasif" @(kategori.AktifMi ? "checked" : "")>
                                                                        </div>
                                                                    </td>
                                                                    <td></td>
                                                                </tr>
                                                            }
                                                        }
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <div class="col-md-offset-5 col-md-7">
                                        @if (urun.UrunId == 0)
                                        {
                                            <button type="submit" class="btn blue">
                                                Kaydet
                                                <i class="fa fa-save"></i>
                                            </button>
                                        }
                                        else
                                        {
                                            <button type="submit" class="btn yellow">
                                                Güncelle
                                                <i class="fa fa-edit"></i>
                                            </button>
                                        }
                                        <a href="/Urun/Index" class="btn red">
                                            İptal
                                            <i class="fa fa-close"></i>
                                        </a>
                                    </div>
                                </div>

                            </div>

                            <div class="tab-pane" id="tab_3">

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="col-md-12 margin-bottom-10">
                                            <div class="alert alert-info no-margin margin-top-10"> <i class="fa fa-info-circle"></i> <b>ÜRÜN BİLGİLERİ</b> sekmesinden seçilen <u>Nitelik Grubu</u> 'na göre nitelikler değişmektedir. </div>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="table-responsive">
                                                    <table id="tableNitelik" class="table table-striped table-bordered margin-top-15">
                                                        <thead>
                                                            <tr>
                                                                <th width="40%">Nitelik Adı</th>
                                                                <th width="40%">Nitelik Değeri</th>
                                                                <th width="10%">Sıra</th>
                                                                <th width="10%">Aktif mi?</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @{
                                                                foreach (var nitelik in urunNitelikler)
                                                                {
                                                                    <tr data-id="@nitelik.UrunNitelikId" data-nitelikid="@nitelik.NitelikId">
                                                                        <td>@nitelik.Nitelik.Adi</td>
                                                                        <td>
                                                                            <input id="txtNitelikDeger@(nitelik.NitelikId)" type="text" class="form-control input-sm" placeholder="Nitelik Değeri" value="@nitelik.NitelikDegeri" />
                                                                        </td>
                                                                        <td>
                                                                            <input id="txtNitelikSira@(nitelik.NitelikId)" type="text" class="form-control input-sm integer-2 focus-sense" placeholder="Sıra" value="@nitelik.Sira" />
                                                                        </td>
                                                                        <td>
                                                                            <div class="icheck-inline">
                                                                                <input id="txtNitelikAktif@(nitelik.NitelikId)" type="checkbox" class="make-switch" data-size="small" data-on-text="Aktif" data-off-text="Pasif" @(nitelik.AktifMi ? "checked" : "")>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                }
                                                            }
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <div class="col-md-offset-5 col-md-7">
                                        @if (urun.UrunId == 0)
                                        {
                                            <button type="submit" class="btn blue">
                                                Kaydet
                                                <i class="fa fa-save"></i>
                                            </button>
                                        }
                                        else
                                        {
                                            <button type="submit" class="btn yellow">
                                                Güncelle
                                                <i class="fa fa-edit"></i>
                                            </button>
                                        }
                                        <a href="/Urun/Index" class="btn red">
                                            İptal
                                            <i class="fa fa-close"></i>
                                        </a>
                                    </div>
                                </div>

                            </div>

                            <div class="tab-pane" id="tab_9">

                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="col-md-6 col-md-offset-3">
                                            <div class="form-group">
                                                <div class="table-responsive">
                                                    <table id="tableUrunOzellik" class="table table-striped table-bordered margin-top-15">
                                                        <tbody>
                                                            @{
                                                                for (int i = 0; i < ozellikler.Count; i++)
                                                                {
                                                                    <tr data-id="@ozellikler[i].OzellikId">
                                                                        <td width="10%;">
                                                                            <div class="text-center">
                                                                                <input type="checkbox" class="icheck" data-size="small"
                                                                                       @(urunOzellikler.Any(x => x.OzellikId == ozellikler[i].OzellikId && x.AktifMi == true) ? "checked" : "")>
                                                                            </div>
                                                                        </td>
                                                                        <td width="90%;">
                                                                            @ozellikler[i].Adi
                                                                        </td>
                                                                    </tr>
                                                                }
                                                            }
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <div class="text-center">
                                        @if (urun.UrunId == 0)
                                        {
                                            <button type="submit" class="btn blue">
                                                Kaydet
                                                <i class="fa fa-save"></i>
                                            </button>
                                        }
                                        else
                                        {
                                            <button type="submit" class="btn yellow">
                                                Güncelle
                                                <i class="fa fa-edit"></i>
                                            </button>
                                        }
                                        <a href="/Urun/Index" class="btn red">
                                            İptal
                                            <i class="fa fa-close"></i>
                                        </a>
                                    </div>
                                </div>

                            </div>

                            <div class="tab-pane" id="tab_10">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="fileinput fileinput-new" data-provides="fileinput">
                                                <div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 200px; max-height: 150px; display:block !important;"> @urun.OrnekDosyaYolu </div>
                                                <div>
                                                    <span class="btn default btn-file">
                                                        <span class="fileinput-new" style="width:98px;"> Resim/Dosya Seç </span>
                                                        <span class="fileinput-exists" style="width:98px;"> Değiştir </span>
                                                        <input id="fileUploadResim" name="fileUploadResim" type="file" onchange="resimSecildi();">
                                                    </span>
                                                    <a href="javascript:;" style="width:98px;" class="btn red fileinput-exists" data-dismiss="fileinput"> Sil </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <div class="text-center">
                                        @if (urun.UrunId == 0)
                                        {
                                            <button type="button" class="btn blue" onclick="ornekDosyaYoluKaydet();">
                                                Kaydet
                                                <i class="fa fa-save"></i>
                                            </button>
                                        }
                                        else
                                        {
                                            <button type="button" class="btn yellow" onclick="ornekDosyaYoluKaydet();">
                                                Güncelle
                                                <i class="fa fa-edit"></i>
                                            </button>
                                        }
                                        <a href="/Urun/Index" class="btn red">
                                            İptal
                                            <i class="fa fa-close"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <div class="tab-pane" id="tab_4">
                                <div>
                                    <div id="uploadSuccess" class="alert alert-success" style="display:none;">
                                        <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>
                                        <i class="fa fa-check fa-lg"></i> Resimler başarıyla yüklendi.
                                    </div>
                                    <div id="uploadDanger" class="alert alert-danger" style="display:none;">
                                        <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>
                                        <i class="fa fa-warning fa-lg"></i> İşlem sırasında bir sorun oluştu. Lütfen tekrar deneyin.
                                    </div>
                                    <div id="tab_images_uploader_container" class="text-align-reverse margin-bottom-10">
                                        <a id="tab_images_uploader_pickfiles" href="javascript:;" class="btn btn-success">
                                            <i class="fa fa-plus"></i> Resimleri Seç
                                        </a>
                                        <a id="tab_images_uploader_uploadfiles" href="javascript:;" class="btn btn-primary">
                                            <i class="fa fa-share"></i> Resimleri Yükle
                                        </a>
                                    </div>
                                    <div class="row">
                                        <div id="tab_images_uploader_filelist" class="col-md-6 col-sm-12"> </div>
                                    </div>
                                    <div class="table-responsive">
                                        <table id="tableResim" class="table table-bordered table-hover">
                                            <thead>
                                                <tr role="row" class="heading">
                                                    <th style="width:5%;">Resim</th>
                                                    <th style="width:10%;">Resim Tipi</th>
                                                    <th style="width:25%;">Açıklama</th>
                                                    <th style="width:15%;">Alt Attribute</th>
                                                    <th style="width:15%;">Title Attribute</th>
                                                    <th style="width:8%;">Tarih</th>
                                                    <th style="width:5%;">Sıra</th>
                                                    <th style="width:5%;">Yeni mi?</th>
                                                    <th style="width:5%;">Aktif mi?</th>
                                                    <th style="width:7%;">İşlem</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @{
                                                    foreach (var resim in urunResimler)
                                                    {
                                                        <tr class="data-show" data-id="@resim.UrunResimId">
                                                            <td>
                                                                <a class="img-hb" href="javascript:;" data-toggle="popover" data-img="@resim.ResimYolu">
                                                                    <img style="width:64px;height:64px;" src="@resim.ResimYolu" />
                                                                </a>
                                                            </td>
                                                            <td class="hb-resimtip">@resim.UrunResimTip.Adi</td>
                                                            <td class="hb-aciklama">@resim.Aciklama</td>
                                                            <td class="hb-altattr">@resim.AltAttribute</td>
                                                            <td class="hb-titleattr">@resim.TitleAttribute</td>
                                                            <td class="hb-tarih">@resim.Tarih.ToString("dd.MM.yyyy")</td>
                                                            <td class="hb-sira">@resim.Sira</td>
                                                            <td class="hb-yenimi">
                                                                <div class="icheck-inline">
                                                                    <input id="yenimi-@(resim.UrunResimId)" type="checkbox" class="make-switch" data-size="mini" data-on-text="Evet" data-off-text="Hayır" @(resim.YeniMi ? "checked" : "") readonly>
                                                                </div>
                                                            </td>
                                                            <td class="hb-aktifmi">
                                                                <div class="icheck-inline">
                                                                    <input id="aktifmi-@(resim.UrunResimId)" type="checkbox" class="make-switch" data-size="mini" data-on-text="Aktif" data-off-text="Pasif" @(resim.AktifMi ? "checked" : "") readonly>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <a href="javascript:;" class="btn btn-xs yellow-gold" data-toggle="tooltip" data-placement="top" title="Güncelle" onclick="editModeResim('@resim.UrunResimId', this);">
                                                                    <i class="fa fa-edit"></i>
                                                                </a>
                                                            </td>
                                                        </tr>
                                                        <tr class="data-edit none" data-id="@resim.UrunResimId">
                                                            <td>
                                                                <a class="img-hb" href="javascript:;" data-toggle="popover" data-img="@resim.ResimYolu">
                                                                    <img style="width:64px;height:64px;" src="@resim.ResimYolu" />
                                                                </a>
                                                            </td>
                                                            <td>
                                                                <input type="hidden" id="resimtip-@(resim.UrunResimId)" class="form-control select2 resim-tip" style="width:100%;" value="@resim.UrunResimTipId" />
                                                            </td>
                                                            <td>
                                                                <input id="ack-@(resim.UrunResimId)" type="text" class="form-control input-sm maxlength-handler" maxlength="500" placeholder="Açıklama..." value="@resim.Aciklama" />
                                                            </td>
                                                            <td>
                                                                <input id="altattr-@(resim.UrunResimId)" type="text" class="form-control input-sm maxlength-handler" maxlength="500" placeholder="Alt Attribute..." value="@resim.AltAttribute" />
                                                            </td>
                                                            <td>
                                                                <input id="titleattr-@(resim.UrunResimId)" type="text" class="form-control input-sm maxlength-handler" maxlength="500" placeholder="Title Attribute..." value="@resim.TitleAttribute" />
                                                            </td>
                                                            <td>
                                                                <div id="tarih-@(resim.UrunResimId)" class="input-group date" data-provide="datepicker">
                                                                    <input type="text" class="form-control input-sm" placeholder="Tarih..." value="@resim.Tarih.ToString("dd.MM.yyyy")">
                                                                    <div class="input-group-addon">
                                                                        <span class="glyphicon glyphicon-th"></span>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <input id="sira-@(resim.UrunResimId)" type="text" class="form-control input-sm maxlength-handler integer-2 focus-sense" placeholder="Sıra..." value="@resim.Sira" />
                                                            </td>
                                                            <td>
                                                                <div class="icheck-inline">
                                                                    <input id="yeni-@(resim.UrunResimId)" type="checkbox" class="make-switch" data-size="mini" data-on-text="Evet" data-off-text="Hayır" @(resim.YeniMi ? "checked" : "")>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <div class="icheck-inline">
                                                                    <input id="aktif-@(resim.UrunResimId)" type="checkbox" class="make-switch" data-size="mini" data-on-text="Aktif" data-off-text="Pasif" @(resim.AktifMi ? "checked" : "")>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <a href="javascript:;" class="btn btn-xs btn-default" data-toggle="tooltip" data-placement="top" title="Vazgeç" onclick="CancelModeResim('@resim.UrunResimId', this);">
                                                                    <i class="fa fa-check-circle"></i>
                                                                </a>
                                                                <a href="javascript:;" class="btn btn-xs green-meadow" data-toggle="tooltip" data-placement="top" title="Kaydet" onclick="SaveModeResim('@resim.UrunResimId', this);">
                                                                    <i class="fa fa-check-circle"></i>
                                                                </a>
                                                            </td>
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="tab-pane" id="tab_6">

                                <div class="row margin-bottom-10">
                                    <div class="col-md-6 col-md-offset-3">
                                        <div class="form-group">
                                            <div class="col-md-9">
                                                <label for="dropDownUrun" class="control-label">
                                                    Ürün<span style="font-size: 12px;color: #ef5e77;"> Ürün Adı / Ürün Kodu / Barkod No' ya göre arama yapabilirsiniz.</span>
                                                </label>
                                                <div class="input-icon right">
                                                    <i class="fa"></i>
                                                    <select id="dropDownUrun" name="dropDownUrun" class="form-control select2" style="width:100%;"></select>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="clearfix">
                                                    <label>&nbsp;</label>
                                                </div>
                                                <button type="button" class="btn yellow-lemon btn-sm" onclick="ilgiliUrunEkle();">
                                                    <i class="fa fa-plus"></i> Ekle
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <div class="table-responsive">
                                                    <table id="tableIlgiliUrun" class="table table-striped table-bordered table-hover">
                                                        <thead>
                                                            <tr>
                                                                <th width="50%">Ürün Adı</th>
                                                                <th width="20%">Ürün Açıklama</th>
                                                                <th width="10%">Sıra</th>
                                                                <th width="10%">Aktif mi?</th>
                                                                <th width="10%">İşlemler</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @{
                                                                foreach (var ilgiliUrun in ilgiliUrunler)
                                                                {
                                                                    <tr data-id="@ilgiliUrun.IlgiliUrunId" data-urunid="@ilgiliUrun.UrunId2">
                                                                        <td>@ilgiliUrun.Urun1.Adi</td>
                                                                        <td>@ilgiliUrun.Urun1.KisaAciklama</td>
                                                                        <td>
                                                                            <input id="txtIlgiliUrunSira@(ilgiliUrun.UrunId2)" type="text" class="form-control input-sm integer-2 focus-sense" placeholder="Sıra" value="@ilgiliUrun.Sira" />
                                                                        </td>
                                                                        <td>
                                                                            <div class="icheck-inline">
                                                                                <input id="txtIlgiliUrunAktif@(ilgiliUrun.UrunId2)" type="checkbox" class="make-switch" data-size="small" data-on-text="Aktif" data-off-text="Pasif" @(ilgiliUrun.AktifMi ? "checked" : "")>
                                                                            </div>
                                                                        </td>
                                                                        <td></td>
                                                                    </tr>
                                                                }
                                                            }
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <div class="col-md-offset-5 col-md-7">
                                        @if (urun.UrunId == 0)
                                        {
                                            <button type="submit" class="btn blue">
                                                Kaydet
                                                <i class="fa fa-save"></i>
                                            </button>
                                        }
                                        else
                                        {
                                            <button type="submit" class="btn yellow">
                                                Güncelle
                                                <i class="fa fa-edit"></i>
                                            </button>
                                        }
                                        <a href="/Urun/Index" class="btn red">
                                            İptal
                                            <i class="fa fa-close"></i>
                                        </a>
                                    </div>
                                </div>

                            </div>

                            <div class="tab-pane" id="tab_7">
                                <div class="table-container">
                                    <div class="table-responsive">
                                        <table class="table table-striped table-bordered table-hover">
                                            <thead>
                                                <tr>
                                                    <th width="15%">Kullanıcı Eposta</th>
                                                    <th width="15%">Kullanıcı Adı Soyadı</th>
                                                    <th width="35%">Yorum</th>
                                                    <th width="5%">Puan</th>
                                                    <th width="10%">Tarih</th>
                                                    <th width="10%">Gösterilsin mi?</th>
                                                    <th width="10%">Aktif mi?</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @{
                                                    foreach (var yorum in urunYorumlar)
                                                    {
                                                        <tr>
                                                            <td>@yorum.Kullanici.Eposta</td>
                                                            <td>@yorum.Kullanici.KullaniciDetay.Ad @yorum.Kullanici.KullaniciDetay.Soyad</td>
                                                            <td>@yorum.Yorum</td>
                                                            <td>
                                                                <div class="text-center">
                                                                    <span class="badge bg-blue">@yorum.Puan</span>
                                                                </div>
                                                            </td>
                                                            <td>@yorum.Tarih.ToString("dd.MM.yyyy HH:mm")</td>
                                                            <td>
                                                                <div class="icheck-inline">
                                                                    <input id="txtUrunYorumGoster@(yorum.UrunYorumId)" type="checkbox" class="make-switch" data-size="small" data-on-text="Aktif" data-off-text="Pasif"
                                                                           onchange="javascript: urunYorumGuncelle('@yorum.UrunYorumId');" @(yorum.GosterilsinMi ? "checked" : "")>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <div class="icheck-inline">
                                                                    <input id="txtUrunYorumAktif@(yorum.UrunYorumId)" type="checkbox" class="make-switch" data-size="small" data-on-text="Aktif" data-off-text="Pasif"
                                                                           onchange="javascript: urunYorumGuncelle('@yorum.UrunYorumId');" @(yorum.AktifMi ? "checked" : "")>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <div class="tab-pane" id="tab_8">
                                <div class="table-container">
                                    <div class="table-responsive">
                                        <table class="table table-striped table-bordered table-hover">
                                            <thead>
                                                <tr>
                                                    <th width="5%">Sipariş No</th>
                                                    <th width="10%">Sipariş Tarihi</th>
                                                    <th width="15%">Açıklama</th>
                                                    <th width="10%">Sipariş Durumu</th>
                                                    <th width="10%">Ödeme Tipi</th>
                                                    <th width="10%">Ödeme Durumu</th>
                                                    <th width="7%">Fatura Adresi</th>
                                                    <th width="7%">Gönderim Adresi</th>
                                                    <th width="7%">Ürün Listesi</th>
                                                    <th width="7%">Gönderim Hareketleri</th>
                                                    <th width="7%">Sipariş Hareketleri</th>
                                                    <th width="5%">Aktif mi?</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var siparis in urunSiparisler)
                                                {
                                                    <tr>
                                                        <td>#@siparis.SiparisId</td>
                                                        <td>@siparis.SiparisTarihi.ToString("dd.MM.yyyy HH.mm")</td>
                                                        <td>@siparis.Aciklama</td>
                                                        <td>@(siparis.SiparisDurumTip != null ? siparis.SiparisDurumTip.Adi : "?")</td>
                                                        <td>@(siparis.SiparisOdemeTip != null ? siparis.SiparisOdemeTip.Adi : "?")</td>
                                                        <td>@(siparis.OdemeDurumTip != null ? siparis.OdemeDurumTip.Adi : "?")</td>
                                                        <td>
                                                            <div class="text-center">
                                                                <button type="button" class="btn btn-xs purple-intense" style="width:100%;" onclick="detayGoster('Fatura Adresi', '/Adres/AdresDetayPartial/@siparis.FaturaAdresId');">
                                                                    <i class="icon-pointer"></i>
                                                                </button>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="text-center">
                                                                <button type="button" class="btn btn-xs purple-intense" style="width:100%;" onclick="detayGoster('Gönderim Adresi', '/Adres/AdresDetayPartial/@siparis.GonderimAdresId');">
                                                                    <i class="icon-pointer"></i>
                                                                </button>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="text-center">
                                                                <button type="button" class="btn btn-xs purple-intense" style="width:100%;" onclick="detayGoster('Ürün Listesi', '/Siparis/SiparisUrunPartial/@siparis.SiparisId');">
                                                                    <i class="fa fa-cubes"></i>
                                                                </button>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="text-center">
                                                                <button type="button" class="btn btn-xs purple-intense" style="width:100%;" onclick="detayGoster('Gönderim Hareketleri', '/Siparis/SiparisGonderimPartial/@siparis.SiparisId');">
                                                                    <i class="fa fa-bars"></i>
                                                                </button>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="text-center">
                                                                <button type="button" class="btn btn-xs purple-intense" style="width:100%;" onclick="detayGoster('Sipariş Hareketleri', '/Siparis/SiparisHareketPartial/@siparis.SiparisId');">
                                                                    <i class="fa fa-shopping-cart"></i>
                                                                </button>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="text-center">
                                                                <div class="icheck-inline">
                                                                    <input type="checkbox" class="make-switch" data-size="mini" data-on-text="Aktif" data-off-text="Pasif"
                                                                           @(siparis.AktifMi ? "checked" : "") readonly />
                                                                </div>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                        </div>

                    </form>

                </div>
            </div>
        </div>
    </div>
</div>

@section js{
    <script src="~/Content/Theme/assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.js" type="text/javascript"></script>
    <script src="~/Content/Theme/assets/global/plugins/plupload/js/plupload.full.min.js" type="text/javascript"></script>
    <script src="~/Content/Theme/assets/global/plugins/jstree/dist/jstree.min.js" type="text/javascript"></script>

    <script id="urun-nitelik-row" type="text/x-jquery-tmpl">
        <tr data-id="0" data-nitelikid="${NitelikId}">
            <td>${Adi}</td>
            <td>
                <input id="txtNitelikDeger${NitelikId}" type="text" class="form-control input-sm" placeholder="Nitelik Değeri" value="" />
            </td>
            <td>
                <input id="txtNitelikSira${NitelikId}" type="text" class="form-control input-sm integer-2 focus-sense" placeholder="Sıra" value="" />
            </td>
            <td>
                <div class="icheck-inline">
                    <input id="txtNitelikAktif${NitelikId}" type="checkbox" class="make-switch" data-size="small" data-on-text="Aktif" data-off-text="Pasif" checked>
                </div>
            </td>
        </tr>
    </script>

    <script type="text/javascript">
        var vergiListesi = @Html.Raw(Json.Encode(ViewBag.VergiListesi))
        var nitelikGrupListesi = @Html.Raw(Json.Encode(ViewBag.NitelikGrupListesi))
        var resimTipListesi = @Html.Raw(Json.Encode(ViewBag.ResimTipListesi))

        var uploader = new plupload.Uploader({
            runtimes: 'html5,flash,silverlight,html4',

            browse_button: document.getElementById('tab_images_uploader_pickfiles'), // you can pass in id...
            container: document.getElementById('tab_images_uploader_container'), // ... or DOM Element itself

            url: '@Url.Action("ResimYukle", "Urun")' + '?key=' + $('#hdnUrunId').val(),

            filters : {
                max_file_size : '10mb',
                mime_types: [
                    {title : "Image files", extensions : "png,gif,jpg,jpeg,bmp"}
                ]
            },

            init: {
                PostInit: function() {
                    $('#tab_images_uploader_filelist').html("");

                    $('#tab_images_uploader_uploadfiles').click(function() {
                        uploader.start();
                        return false;
                    });

                    $('#tab_images_uploader_filelist').on('click', '.added-files .remove', function () {
                        uploader.removeFile($(this).parent('.added-files').attr("id"));
                        $(this).parent('.added-files').remove();
                    });
                },

                FilesAdded: function(up, files) {
                    var deleteHandle = function (uploaderObject, fileObject) {
                        return function (event) {
                            event.preventDefault();
                            uploaderObject.removeFile(fileObject);
                            $('#uploaded_file_' + fileObject.id).remove();
                        };
                    };

                    for (var i in files) {
                        $('#tab_images_uploader_filelist').append('<div class="alert alert-warning added-files" id="uploaded_file_' + files[i].id + '">' + files[i].name + '(' + plupload.formatSize(files[i].size) + ') <span class="status label label-info"></span>&nbsp;<a href="javascript:;" id="deleteFile' + files[i].id + '" style="margin-top:-5px" class="pull-right btn btn-sm red"><i class="fa fa-times"></i> sil</a></div>');
                        $('#deleteFile' + files[i].id).click(deleteHandle(up, files[i]));
                    }
                },

                UploadProgress: function(up, file) {
                    $('#uploaded_file_' + file.id + ' > .status').html(file.percent + '%');
                },

                FileUploaded: function (up, file, response) {
                    var response = $.parseJSON(response.response);

                    if (response.result && response.result == 'OK') {

                        var id = response.id; // uploaded file's unique name. Here you can collect uploaded file names and submit an jax request to your server side script to process the uploaded files and update the images tabke

                        $('#uploaded_file_' + file.id + ' > .status').removeClass("label-info").addClass("label-success").html('<i class="fa fa-check"></i> Yüklendi'); // set successfull upload
                        $('#uploaded_file_' + file.id + ' .remove').remove();

                        $('#uploadDanger').hide();
                        $('#uploadSuccess').show();

                        setTimeout(function () {
                            window.location.href = '/Urun/Save/' + $('#hdnUrunId').val();
                        }, 2000);
                    } else {
                        $('#uploaded_file_' + file.id + ' > .status').removeClass("label-info").addClass("label-danger").html('<i class="fa fa-warning"></i> Bir sorun Oluştu'); // set failed upload

                        $('#uploadDanger').show();
                        $('#uploadSuccess').hide();
                    }
                },

                Error: function (up, err) {
                    $('#uploadDanger').show();
                    $('#uploadSuccess').hide();
                }
            }
        });

        function deleteFile(file) {
            uploader.removeFile(file);
        }

        $(document).ready(function () {
            uploader.init();

            $('#dropDownNitelikGrup').select2({
                placeholder: "Nitelik Grubu Seçiniz...",
                allowClear: true,
                language: {
                    noResults: function (params) {
                        return "Hiç kayıt bulunamadı.";
                    }
                },
                data: nitelikGrupListesi,
                escapeMarkup: function (markup) {
                    return markup;
                },
                templateResult: templateData,
                templateSelection: templateDataSelection
            }).val('').trigger('change');

            @if(urun != null && urun.UrunId > 0)
            {
                <text>
                $('#dropDownNitelikGrup').val('@(urun.NitelikGrupId)').trigger('change');

                $('#dropDownNitelikGrup').on('change', function () {
                    if ($('#dropDownNitelikGrup').val() != null && $('#dropDownNitelikGrup').val() != '') {
                        nitelikGetir($('#dropDownNitelikGrup').val());
                    } else {
                        $('#tableNitelik tbody').children().remove();
                    }
                });
                </text>
            }
            else
            {
                <text>
                $('#dropDownNitelikGrup').on('change', function () {
                    if ($('#dropDownNitelikGrup').val() != null && $('#dropDownNitelikGrup').val() != '') {
                        nitelikGetir($('#dropDownNitelikGrup').val());
                    } else {
                        $('#tableNitelik tbody').children().remove();
                    }
                });
                </text>
            }

            $('#dropDownMarka').select2({
                placeholder: "Marka Ara...",
                allowClear: true,
                minimumInputLength: 3,
                language: {
                    noResults: function (params) {
                        return "Hiç kayıt bulunamadı.";
                    },
                    searching: function () {
                        return 'Aranıyor...';
                    },
                    inputTooShort: function (args) {
                        var remainingChars = args.minimum - args.input.length;
                        var message = 'En az ' + remainingChars + ' karakter daha girmelisiniz.';
                        return message;
                    },
                    errorLoading: function () {
                        return 'Sonuç yüklenemedi.';
                    },
                },
                ajax: {
                    url: '/Marka/MarkaAra',
                    dataType: 'json',
                    type: 'get',
                    delay: 500,
                    params: {
                        contentType: 'application/json; charset=utf-8'
                    },
                    data: function (params) {
                        return {
                            term: params.term
                        };
                    },
                    processResults: function (data, params) {
                        var data = $.map(data, function (obj) {
                            obj.id = obj.id;
                            obj.text = obj.text;
                            return obj;
                        });

                        return {
                            results: data
                        };
                    },
                    escapeMarkup: function (m) { return m; }
                }
            });
            @if(urun.UrunId > 0 && urun.Marka != null)
            {
                <text>
                var option = new Option('@urun.Marka.Adi', '@urun.Marka.MarkaId', true, true);
                $('#dropDownMarka').append(option).trigger('change');
                $('#dropDownMarka').val('@urun.Marka.MarkaId').trigger('change');
                </text>
            }

            $('#dropDownVergi').select2({
                placeholder: "Vergi Seçiniz...",
                allowClear: true,
                language: {
                    noResults: function (params) {
                        return "Hiç kayıt bulunamadı.";
                    }
                },
                data: vergiListesi,
                escapeMarkup: function (markup) {
                    return markup;
                },
                templateResult: templateData,
                templateSelection: templateDataSelection
            }).val('').trigger('change');
            @if(urun != null && urun.UrunId > 0)
            {
                @: $('#dropDownVergi').val('@(urun.VergiId)').trigger('change');
            }
            else
            {
                <text>
                if (vergiListesi != null && vergiListesi.length > 0)
                {
                    var liste = $.grep(vergiListesi, function (v) {
                        return v.aktif == true;
                    });

                    if (liste != null && liste.length > 0)
                    {
                        $('#dropDownVergi').val(liste[0].id).trigger('change');
                    }
                }
                </text>
            }

            $('.resim-tip').select2({
                placeholder: "Resim Tipi Seçiniz...",
                language: {
                noResults: function (params) {
                    return "Hiç kayıt bulunamadı.";
                    }
                },
                data: resimTipListesi,
                escapeMarkup: function (markup) {
                    return markup;
                },
                templateResult: templateData,
                templateSelection: templateDataSelection
            });

            $('#dropDownUrun').select2({
                placeholder: "Ürün Ara...",
                allowClear: true,
                minimumInputLength: 3,
                language: {
                    noResults: function (params) {
                        return "Hiç kayıt bulunamadı.";
                    },
                    searching: function () {
                        return 'Aranıyor...';
                    },
                    inputTooShort: function (args) {
                        var remainingChars = args.minimum - args.input.length;
                        var message = 'En az ' + remainingChars + ' karakter daha girmelisiniz.';
                        return message;
                    },
                    errorLoading: function () {
                        return 'Sonuç yüklenemedi.';
                    },
                },
                ajax: {
                    url: '/Urun/UrunAra',
                    dataType: 'json',
                    type: 'get',
                    delay: 500,
                    params: {
                        contentType: 'application/json; charset=utf-8'
                    },
                    data: function (params) {
                        return {
                            term: params.term
                        };
                    },
                    processResults: function (data, params) {
                        var data = $.map(data, function (obj) {
                            obj.id = obj.id;
                            obj.text = obj.text;
                            return obj;
                        });

                        return {
                            results: data
                        };
                    },
                    escapeMarkup: function (m) { return m; }
                }
            }).val(null).trigger('change');

            CKEDITOR.replace('txtUzunAciklama', {
                language: 'tr',
                contentsLanguage: 'tr'
            });

            $('.input-group.date').datepicker({
                autoclose: true,
                dateFormat: "dd.mm.yyyy",
                language: 'tr'
            });

            $(".integer").inputmask('999999', {
                numericInput: true,
                rightAlignNumerics: false,
                greedy: false,
                placeholder: '000000'
            });
            $(".integer-2").inputmask('99', {
                numericInput: true,
                rightAlignNumerics: false,
                greedy: false,
                placeholder: '00'
            });

            $(".decimal-4").inputmask('decimal', {
                rightAlign: false,
                integerDigits: 18,
                radixPoint: ".",
                digits: 4
            });

            $('#tableUrunOzellik .icheck').iCheck({
                checkboxClass: 'icheckbox_minimal-blue'
            });

            $('[data-toggle="tooltip"]').tooltip();
            $('[data-toggle="popover"]').popover({
                container: 'body',
                html: true,
                placement: 'right',
                trigger: 'hover',
                content: function () {
                    var url = $(this).data('img');
                    return '<img src="' + url + ' " style="width:250px;height:250px;">'
                }
            });

            // KATEGORİ TREE
            $("#kategoriTreeView").jstree({
                "core": {
                    'data': {
                        'url': function (node) {
                            return '/Kategori/GetTreeData?parent=' + node.id;
                        },
                        'data': function (node) {
                            return { 'id': node.id };
                        }
                    }
                },
                "types": {
                    "root": {
                        "icon": "fa fa-folder"
                    },
                    "default": {
                        "icon": "fa fa-folder icon-state-warning"
                    },
                    "file": {
                        "icon": "fa fa-file icon-state-warning"
                    }
                },
                "search": {
                    "case_insensitive": true,
                    "show_only_matches": true
                },
                "plugins": ["search,", "themes", "types"]
            }).bind("dblclick.jstree", function (event, data) {
                var node = $(event.target).closest("li");

                var nodeVarMi = false;
                $('#tableKategori tbody tr').each(function () {
                    var trRow = $(this);

                    if (trRow.attr('data-kategoriid') == node.attr('id')) {
                        nodeVarMi = true;
                        return false;
                    }
                });
                if (nodeVarMi) {
                    $('#tableKategori tbody tr[data-kategoriid="' + node.attr('id') + '"]').addClass('bg-red-pink');
                    setTimeout(function () {
                        $('#tableKategori tbody tr[data-kategoriid="' + node.attr('id') + '"]').removeClass('bg-red-pink');
                    }, 500);
                    return false;
                }

                $('#tableKategori tbody').append('<tr data-id="0" data-kategoriid="' + node.attr('id') + '">'
                    + '<td>' + node.context.text + '</td>'
                    + '<td>'
                    + '<input id="txtKategoriSira' + node.attr('id') + '" type="text" class="form-control input-sm integer-5" placeholder="Sıra" value="" />'
                    + '</td>'
                    + '<td>'
                    + '<div class="icheck-inline">'
                    + '<input id="txtKategoriAktif' + node.attr('id') + '" type="checkbox" class="make-switch" data-size="small" data-on-text="Aktif" data-off-text="Pasif" checked />'
                    + '</div>'
                    + '</td>'
                    + '<td>'
                    + '<div class="text-center">'
                    + '<button type="button" class="btn btn-xs red" data-toggle="tooltip" data-placement="top" title="Sil" onclick="javascript:nodeSil(this);">'
                    + '<i class="fa fa-remove"></i>'
                    + '</button>'
                    + '</div>'
                    + '</td>'
                    + '</tr>');

                $('[data-toggle="tooltip"]').tooltip();
                $('#txtKategoriAktif' + node.attr('id')).bootstrapSwitch();
                $('#txtKategoriSira' + node.attr('id')).inputmask('99999', {
                    numericInput: true,
                    rightAlignNumerics: false,
                    greedy: false,
                    placeholder: '00000'
                });
            });

            // Form 1 validations
            var rules_1 = {
                txtUrunAd: {
                    maxlength: 200,
                    required: true
                },
                txtUrunKodu: {
                    maxlength: 100,
                    required: false
                },
                txtBarkodNo: {
                    maxlength: 50,
                    required: false
                },
                dropDownNitelikGrup: {
                    required: true
                },
                txtKisaAciklama: {
                    maxlength: 50,
                    required: false
                },
                dropDownVergi: {
                    required: true
                },
                dropDownMarka: {
                    required: true
                },
                txtStokMiktar: {
                    number: true,
                    greaterThanZero: true,
                    required: true
                },
                txtStokAlarmSeviye: {
                    number: true,
                    greaterThanZero: true,
                    required: true
                },
                txtMinimumSiparisMiktar: {
                    number: true,
                    greaterThanZero: true,
                    required: true
                },
                txtMaximumSiparisMiktar: {
                    number: true,
                    greaterThanZero: true,
                    required: true
                },
                txtSira: {
                    number: true,
                    greaterThanZero: true,
                    required: true
                },
                txtAgirlik: {
                    number: true,
                    greaterThanZero: true,
                    required: true
                },
                txtUzunluk: {
                    number: true,
                    greaterThanZero: true,
                    required: true
                },
                txtGenislik: {
                    number: true,
                    greaterThanZero: true,
                    required: true
                },
                txtYukseklik: {
                    number: true,
                    greaterThanZero: true,
                    required: true
                },
                txtFiyat: {
                    number: true,
                    greaterThanZero: true,
                    required: true
                },
                txtEskiFiyat: {
                    number: true,
                    greaterThanZero: true,
                    required: true
                },
                txtMaliyet: {
                    number: true,
                    greaterThanZero: true,
                    required: true
                },
                //txtOzelFiyat: {
                //    number: true,
                //    greaterThanZero: true
                //}
            };
            validation(1, rules_1, urunBilgiKaydet);
            $('.select2', $('#comform_1')).change(function () {
                $('#comform_1').validate().element($(this));
            });
        });

        function select2_search($el, term) {
            $el.select2('open');

            // Get the search box within the dropdown or the selection
            // Dropdown = single, Selection = multiple
            var $search = $el.data('select2').dropdown.$search || $el.data('select2').selection.$search;
            // This is undocumented and may change in the future

            $search.val(term);
            $search.trigger('keyup');
        }

        function templateData(obj) {
            if (obj.id == '')
                return obj.text;

            if (obj.aktif) {
                return obj.text;
            } else {
                return '<span style="color:red;">' + obj.text + ' (Pasif)</span>';
            }
        }
        function templateDataSelection(obj) {
            if (obj.id == '')
                return obj.text;

            if (obj.aktif) {
                return obj.text;
            } else {
                return '<span style="color:red;">' + obj.text + ' (Pasif)</span>';
            }
        }

        function validation(formNo, rules, saveFunc) {
            $('#comform_' + formNo).validate({
                errorElement: 'span',
                errorClass: 'help-block help-block-error',
                focusInvalid: false,
                ignore: "",
                rules: rules,
                invalidHandler: validationInvalidHandler,
                errorPlacement: function (error, element) {
                    var icon = $(element).parent('.input-icon').children('i');
                    icon.removeClass('fa-check').addClass("fa-warning");
                    icon.attr("data-original-title", error.text()).tooltip({ 'container': 'body' });
                },
                highlight: function (element) {
                    $(element)
                        .closest('.form-group').removeClass("has-success").addClass('has-error');
                },
                unhighlight: function (element) {

                },
                success: function (label, element) {
                    var icon = $(element).parent('.input-icon').children('i');
                    $(element).closest('.form-group').removeClass('has-error').addClass('has-success');
                    icon.removeClass("fa-warning").addClass("fa-check");
                },
                submitHandler: function (e) {
                    saveFunc();
                },
            });
        }

        function urunBilgiKaydet() {
            if (CKEDITOR.instances.txtUzunAciklama.getData().length > 5000) {
                callAlert('warning', 'Uzun açıklama 5000 karakterden fazla olamaz.');
                return false;
            }

            if ($('#txtMinimumSiparisMiktar').val() != '' && $('#txtMaximumSiparisMiktar').val() != '') {
                if (parseInt($('#txtMinimumSiparisMiktar').val()) > parseInt($('#txtMaximumSiparisMiktar').val())) {
                    callAlert('warning', 'Minimum sipariş miktarı maximum sipariş miktarından büyük olamaz.');
                    return false;
                }
            }

            if ($('#txtOnSiparisAktif').is(":checked")) {
                if ($('#dateTimeBaslangicTarihi').find('input').val() == '' && $('#dateTimeBitisTarihi').find('input').val() == '') {
                    callAlert('warning', 'Ön Sipariş aktif olduğu için "Sevk Başlangıç ve Bitiş Tarihi" girilmelidir.');
                    return false;
                }
            }

            if ($('#dateTimeBaslangicTarihi').find('input').val() != '' && $('#dateTimeBitisTarihi').find('input').val() != '') {
                if ($('#dateTimeBaslangicTarihi').datepicker('getDate') > $('#dateTimeBitisTarihi').datepicker('getDate')) {
                    callAlert('warning', 'Sevk başlangıç tarihi bitiş tarihinden büyük olamaz.');
                    return false;
                }
            }

            if ($('#txtOzelFiyatAktifMi').is(":checked")) {
                if ($('#txtOzelFiyat').val() == '') {
                    callAlert('warning', 'Özel Fiyat aktif olduğu için "Özel Fiyat" girilmelidir.');
                    return false;
                }
                if ($('#dateTimeOzelFiyatBaslangicTarihi').find('input').val() == '' && $('#dateTimeOzelFiyatBitisTarihi').find('input').val() == '') {
                    callAlert('warning', 'Özel Fiyat aktif olduğu için "Özel Fiyat Başlangıç ve Bitiş Tarihi" girilmelidir.');
                    return false;
                }
            }

            if ($('#dateTimeOzelFiyatBaslangicTarihi').find('input').val() != '' && $('#dateTimeOzelFiyatBitisTarihi').find('input').val() != '') {
                if ($('#dateTimeOzelFiyatBaslangicTarihi').datepicker('getDate') > $('#dateTimeOzelFiyatBitisTarihi').datepicker('getDate')) {
                    callAlert('warning', '"Özel Fiyat" için başlangıç tarihi bitiş tarihinden büyük olamaz.');
                    return false;
                }
            }

            // Ürün Kategoriler
            var urunKategoriler = [];
            $('#tableKategori tbody tr').each(function () {
                var trRow = $(this);

                urunKategoriler.push({
                    UrunKategoriId: trRow.attr('data-id'),
                    UrunId: parseInt($('#hdnUrunId').val()),
                    KategoriId: trRow.attr('data-kategoriid'),
                    Sira: $('#txtKategoriSira' + trRow.attr('data-kategoriid')).val(),
                    AktifMi: $('#txtKategoriAktif' + trRow.attr('data-kategoriid')).is(":checked") ? true : false
                });
            });

            // Ürün Nitelikler
            var urunNitelikler = [];
            var nitelikDegerGirilmisMi = true;
            $('#tableNitelik tbody tr').each(function () {
                var trRow = $(this);

                if (trRow.find('td').eq(1).find('input').val() == '') {
                    nitelikDegerGirilmisMi = false;
                    return false;
                }

                urunNitelikler.push({
                    UrunNitelikId: trRow.attr('data-id'),
                    UrunId: parseInt($('#hdnUrunId').val()),
                    NitelikId: trRow.attr('data-nitelikid'),
                    NitelikDegeri: $('#txtNitelikDeger' + trRow.attr('data-nitelikid')).val(),
                    Sira: $('#txtNitelikSira' + trRow.attr('data-nitelikid')).val(),
                    AktifMi: $('#txtNitelikAktif' + trRow.attr('data-nitelikid')).is(":checked") ? true : false
                });
            });

            if (!nitelikDegerGirilmisMi) {
                callAlert('warning', 'Lütfen ürün nitelikleri için nitelik değerlerini giriniz.');
                return false;
            }

            // Ürün özellikler
            var urunOzellikler = [];
            $('#tableUrunOzellik tbody tr').each(function () {
                var trRow = $(this);

                if (trRow.children().eq(0).find('input').is(":checked")) {
                    urunOzellikler.push({
                        UrunOzellikId: 0,
                        UrunId: parseInt($('#hdnUrunId').val()),
                        OzellikId: trRow.attr('data-id')
                    });
                }
            });

            // İlgili ürünler
            var ilgiliUrunler = [];
            $('#tableIlgiliUrun tbody tr').each(function () {
                var trRow = $(this);

                ilgiliUrunler.push({
                    IlgiliUrunId: trRow.attr('data-id'),
                    UrunId1: parseInt($('#hdnUrunId').val()),
                    UrunId2: trRow.attr('data-urunid'),
                    Sira: $('#txtIlgiliUrunSira' + trRow.attr('data-urunid')).val(),
                    AktifMi: $('#txtIlgiliUrunAktif' + trRow.attr('data-urunid')).is(":checked") ? true : false
                });
            });

            var data = {
                UrunId: parseInt($('#hdnUrunId').val()),
                Adi: $('#txtUrunAd').val(),
                UrunKod: $('#txtUrunKodu').val(),
                Barkod: $('#txtBarkodNo').val(),
                NitelikGrupId: ($('#dropDownNitelikGrup').val() != '' && $('#dropDownNitelikGrup').val() != null) ? $('#dropDownNitelikGrup').val() : 0,
                MarkaId: ($('#dropDownMarka').val() != '' && $('#dropDownMarka').val() != null) ? $('#dropDownMarka').val() : 0,
                VergiId: ($('#dropDownVergi').val() != '' && $('#dropDownVergi').val() != null) ? $('#dropDownVergi').val() : 0,
                UzunAciklama: CKEDITOR.instances.txtUzunAciklama.getData(),
                KisaAciklama: $('#txtKisaAciklama').val(),
                BaslangicTarihi: $('#dateTimeBaslangicTarihi').find('input').val() != '' ? $('#dateTimeBaslangicTarihi').datepicker('getDate').toUTCString() : null,
                BitisTarihi: $('#dateTimeBitisTarihi').find('input').val() != '' ? $('#dateTimeBitisTarihi').datepicker('getDate').toUTCString() : null,
                YorumYapilabilsinMi: $('#txtYorumYap').is(":checked") ? true : false,
                StokMiktar: $('#txtStokMiktar').val(),
                StokAlarmSeviyesi: $('#txtStokAlarmSeviye').val(),
                StoktaVarMi: $('#txtStoktaVar').is(":checked") ? true : false,
                StokMiktariGosterilsinMi: $('#txtStokMiktarGoster').is(":checked") ? true : false,
                MinimumSiparisMiktari: $('#txtMinimumSiparisMiktar').val(),
                MaksimumSiparisMiktari: $('#txtMaximumSiparisMiktar').val(),
                SatinAlAktifMi: $('#txtSatinAlAktif').is(":checked") ? true : false,
                OnSiparisAktifMi: $('#txtOnSiparisAktif').is(":checked") ? true : false,
                Sira: $('#txtSira').val(),
                AktifMi: $('#txtAktif').is(":checked") ? true : false,
                Agirlik: parseFloat($('#txtAgirlik').val()),
                Uzunluk: parseFloat($('#txtUzunluk').val()),
                Genislik: parseFloat($('#txtGenislik').val()),
                Yukseklik: parseFloat($('#txtYukseklik').val()),
                OzelFiyatAktifMi: $('#txtOzelFiyatAktifMi').is(":checked") ? true : false,
                OzelFiyat: $('#txtOzelFiyat').val() != '' ? parseFloat($('#txtOzelFiyat').val()) : null,
                OzelFiyatBaslangicTarihi: $('#dateTimeOzelFiyatBaslangicTarihi').find('input').val() != '' ? $('#dateTimeOzelFiyatBaslangicTarihi').datepicker('getDate').toUTCString() : null,
                OzelFiyatBitisTarihi: $('#dateTimeOzelFiyatBitisTarihi').find('input').val() != '' ? $('#dateTimeOzelFiyatBitisTarihi').datepicker('getDate').toUTCString() : null,
                Fiyat: parseFloat($('#txtFiyat').val()),
                EskiFiyat: parseFloat($('#txtEskiFiyat').val()),
                Maliyet: parseFloat($('#txtMaliyet').val()),
                Tags: $('#txtTags').val(),
                MetaTitle: $('#txtMetaTitle').val(),
                MetaKeywords: $('#txtMetaKeywords').val(),
                MetaDescription: $('#txtMetaDescription').val(),
                UrunKategori: urunKategoriler,
                UrunNitelik: urunNitelikler,
                IlgiliUrun: ilgiliUrunler,
                UrunOzellik: urunOzellikler
            };

            $.ajax({
                url: '/Urun/UrunBilgiKaydetGuncelle',
                data: JSON.stringify(data),
                type: "post",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    showLoadingModal();
                },
                success: function (result) {
                    hideLoadingModal();
                    if (result > 0) {
                        callAlert('success', 'Kayıt işlemi başarılı.');
                        setTimeout(function myfunction() {
                            window.location.href = '/Urun/Save/' + result;
                        }, 1500);
                    }
                    else {
                        callAlert('error', 'İşlem sırasında bir sorun oluştu. Lütfen tekrar deneyin.');
                    }
                },
                error: function () {
                    hideLoadingModal();
                    callAlert('error', 'Beklenmedik bir sorun oluştu. Lütfen tekrar deneyin.');
                }
            });
        }

        function nodeSil(obj) {
            $(obj).closest('tr').remove();
        }

        function editModeResim(id, obj) {
            $('#tableResim .data-edit').addClass('none');
            $('#tableResim .data-show').removeClass('none');

            var trRow = $(obj).closest('tr').addClass('none');
            $('#tableResim .data-edit[data-id="' + id + '"]').removeClass('none');
        }

        function CancelModeResim(id, obj) {
            $('#tableResim .data-edit').addClass('none');
            $('#tableResim .data-show').removeClass('none');
        }

        function SaveModeResim(id, obj) {
            var resimTipId = $('#resimtip-' + id).val();
            var resimTipText = $('#resimtip-' + id).select2('data')[0].text;
            var aciklama = $('#ack-' + id).val();
            var altAttr = $('#altattr-' + id).val();
            var titleAttr = $('#titleattr-' + id).val();
            var tarih = $('#tarih-' + id).find('input').val() != '' ? $('#tarih-' + id).datepicker('getDate').toUTCString() : null;
            var tarihText = $('#tarih-' + id).find('input').val();
            var sira = $('#sira-' + id).val();
            var yenimi = $('#yeni-' + id).is(":checked") ? true : false;
            var aktifmi = $('#aktif-' + id).is(":checked") ? true : false;

            var data = {
                UrunResimId: id,
                UrunResimTipId: resimTipId,
                Aciklama: aciklama,
                AltAttribute: altAttr,
                TitleAttribute: titleAttr,
                Tarih: tarih,
                Sira: sira,
                YeniMi: yenimi,
                AktifMi: aktifmi
            };

            $.ajax({
                url: '/Urun/ResimKaydetGuncelle',
                data: JSON.stringify(data),
                type: "post",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    showLoadingModal();
                },
                success: function (result) {
                    hideLoadingModal();
                    if (result) {
                        callAlert('success', 'Resim güncelleme işlemi başarılı.');

                        var trRow = $('#tableResim .data-show[data-id="' + id + '"]');
                        trRow.find('.hb-resimtip').html(resimTipText);
                        trRow.find('.hb-aciklama').html(aciklama);
                        trRow.find('.hb-altattr').html(altAttr);
                        trRow.find('.hb-titleattr').html(titleAttr);
                        trRow.find('.hb-tarih').html(tarihText);
                        trRow.find('.hb-sira').html(sira);

                        $('#yenimi-' + id).bootstrapSwitch('destroy').prop('checked', yenimi).bootstrapSwitch();
                        $('#aktifmi-' + id).bootstrapSwitch('destroy').prop('checked', aktifmi).bootstrapSwitch();

                        $('#tableResim .data-edit').addClass('none');
                        $('#tableResim .data-show').removeClass('none');
                    }
                    else {
                        callAlert('error', 'İşlem sırasında bir sorun oluştu. Lütfen tekrar deneyin.');
                    }
                },
                error: function () {
                    hideLoadingModal();
                    callAlert('error', 'Beklenmedik bir sorun oluştu. Lütfen tekrar deneyin.');
                }
            });
        }

        function ilgiliUrunEkle() {
            if ($('#dropDownUrun').val() != null && $('#dropDownUrun').val() != '') {
                var urunVarMi = false;
                var urunId = $('#dropDownUrun').val();

                $('#tableIlgiliUrun tbody tr').each(function () {
                    var trRow = $(this);

                    if (trRow.attr('data-urunid') == urunId) {
                        urunVarMi = true;
                        return false;
                    }
                });
                if (urunVarMi) {
                    $('#tableIlgiliUrun tbody tr[data-urunid="' + urunId + '"]').addClass('bg-red-pink');
                    setTimeout(function () {
                        $('#tableIlgiliUrun tbody tr[data-urunid="' + urunId + '"]').removeClass('bg-red-pink');
                    }, 500);
                    return false;
                }

                $('#tableIlgiliUrun tbody').append('<tr data-id="0" data-urunid="' + urunId + '">'
                    + '<td>' + $('#dropDownUrun').select2('data')[0].text + '</td>'
                    + '<td></td>'
                    + '<td>'
                        + '<input id="txtIlgiliUrunSira' + urunId + '" type="text" class="form-control input-sm integer-2" placeholder="Sıra" value="" />'
                    + '</td>'
                    + '<td>'
                        + '<div class="icheck-inline">'
                            + '<input id="txtIlgiliUrunAktif' + urunId + '" type="checkbox" class="make-switch" data-size="small" data-on-text="Aktif" data-off-text="Pasif" checked />'
                        + '</div>'
                    + '</td>'
                    + '<td>'
                        + '<div class="text-center">'
                            + '<button type="button" class="btn btn-xs red" data-toggle="tooltip" data-placement="top" title="Sil" onclick="javascript:ilgiliUrunSil(this);">'
                                + '<i class="fa fa-remove"></i>'
                            + '</button>'
                        + '</div>'
                    + '</td>'
                    + '</tr>');

                $('[data-toggle="tooltip"]').tooltip();
                $('#txtIlgiliUrunAktif' + urunId).bootstrapSwitch();
                $('#txtIlgiliUrunSira' + urunId).inputmask('99', {
                    numericInput: true,
                    rightAlignNumerics: false,
                    greedy: false,
                    placeholder: '00'
                });

            } else {
                callAlert('warning', 'Lütfen ilgili ürün seçiniz.');
                return false;
            }
        }
        function ilgiliUrunSil(obj) {
            $(obj).closest('tr').remove();
        }

        function urunYorumGuncelle(id) {
            var data = {
                urunYorumId: id,
                gosterilsinMi: $('#txtUrunYorumGoster' + id).is(":checked") ? true : false,
                aktifMi: $('#txtUrunYorumAktif' + id).is(":checked") ? true : false
            };

            $.ajax({
                url: '/Urun/UrunYorumGuncelle',
                data: JSON.stringify(data),
                type: "post",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    showLoadingModal();
                },
                success: function (result) {
                    hideLoadingModal();

                    if (!result) {
                        callAlert('error', 'İşlem sırasında bir sorun oluştu. Lütfen tekrar deneyin.');
                    } else {
                        callAlert('success', 'Yorum başarıyla güncellendi.');
                    }
                },
                error: function () {
                    hideLoadingModal();
                    callAlert('error', 'Beklenmedik bir sorun oluştu. Lütfen tekrar deneyin.');
                }
            });
        }

        function detayGoster(title, url) {
            showLoadingModal();
            $('#divDetay').html('');
            $('#detayModal .modal-title').text(title);

            $('#divDetay').load(url, function () {
                $('#detayModal').modal('show');
                hideLoadingModal();
            });
        }

        function resimSecildi() {
            $('#emptyFile').attr('src', '/Content/Img/no-image.png');
            $('#hdnOrnekDosyaYolu').val('');

            var ext = $('#fileUploadResim').val().split('.').pop().toLowerCase();
            if ($.inArray(ext, ['gif', 'png', 'jpg', 'jpeg', 'bmp', 'pdf', 'doc', 'docx', 'xls', 'xlsx']) == -1) {
                callAlert('warning', 'Uygun resim formatları \'gif\', \'png\', \'jpg\', \'jpeg\', \'bmp\', \'pdf\', \'doc\', \'docx\', \'xls\', \'xlsx\' olmalıdır.');
                $('#fileUploadResim').val('');
                return false;
            }
        }

        function ornekDosyaYoluKaydet() {
            if (document.getElementById("fileUploadResim").files.length > 1) {
                var ext = $('#fileUploadResim').val().split('.').pop().toLowerCase();
                if ($.inArray(ext, ['gif', 'png', 'jpg', 'jpeg', 'bmp']) == -1) {
                    callAlert('warning', 'Uygun resim formatları \'gif\', \'png\', \'jpg\', \'jpeg\', \'bmp\' olmalıdır.');
                    return false;
                }
            }

            var formData = new FormData();
            var totalFiles = document.getElementById("fileUploadResim").files.length;
            for (var i = 0; i < totalFiles; i++) {
                var file = document.getElementById("fileUploadResim").files[i];

                formData.append("fileUploadResim", file);
            }

            formData.append('urunId', parseInt($('#hdnUrunId').val()));
            formData.append('dosyaYolu', $('#hdnOrnekDosyaYolu').val());

            $.ajax({
                url: '/Urun/OrnekDosyaYoluKaydet',
                data: formData,
                type: "post",
                dataType: "json",
                contentType: false,
                processData: false,

                beforeSend: function () {
                    showLoadingModal();
                },
                success: function (result) {
                    hideLoadingModal();
                    if (result > 0) {
                        callAlert('success', 'Kayıt işlemi başarılı.');
                        setTimeout(function myfunction() {
                            window.location.href = '/Urun/Save/' + result;
                        }, 1500);
                    }
                    else {
                        callAlert('error', 'İşlem sırasında bir sorun oluştu. Lütfen tekrar deneyin.');
                    }
                },
                error: function () {
                    hideLoadingModal();
                    callAlert('error', 'Beklenmedik bir sorun oluştu. Lütfen tekrar deneyin.');
                }
            });
        }

        function nitelikGetir(nitelikGrupId) {
            $.ajax({
                url: '/Nitelik/Ara',
                data: {
                    'nitelikGrupId': nitelikGrupId,
                    'adi': '',
                    'aciklama': '',
                    'aktiflik': 2,
                    'sayfaSayisi': 100000000,
                    'sayfaSirasi': 1
                },
                type: "get",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                beforeSend: function () {
                    showLoadingModal();
                },
                success: function (result) {
                    hideLoadingModal();

                    $('#tableNitelik tbody').children().remove();
                    $('#urun-nitelik-row').tmpl(result.sonucListesi).appendTo('#tableNitelik tbody');

                    $('#tableNitelik .make-switch').bootstrapSwitch();
                    $('#tableNitelik .integer-2').inputmask('99', {
                        numericInput: true,
                        rightAlignNumerics: false,
                        greedy: false,
                        placeholder: '00'
                    });
                    $('[data-toggle="tooltip"]').tooltip();
                },
                error: function () {
                    hideLoadingModal();
                    callAlert('error', 'Beklenmedik bir sorun oluştu. Lütfen tekrar deneyin.');
                }
            });
        }
    </script>
}